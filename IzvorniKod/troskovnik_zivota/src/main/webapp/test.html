<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width">
<title>Pregled troškovnika</title>
<link rel="stylesheet" href="css/Treant.css">
<link rel="stylesheet" href="css/basic-example.css">
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
</head>

<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="js/general.js"></script>


<script type="text/javascript">
	var indexi = [];
	var name = sessionStorage.getItem('expenseListName');
	var expenseList;
	var currentEditCategoryName;

	function removeExpenseList() {
		$.ajax({
			type : 'DELETE',
			url : "service/expenseList/remove/" + expenseList.name,
			dataType : 'text',
			success : function(responseData, textStatus, jqXHR) {
				window.location.replace("home2.html")
				$('#appBody').html(originalCreationDivision);
				console.log('Izbrisao troškovnik');
			},
			error : function(responseData, textStatus, errorThrown) {
				console.log('POST failed nisam izbriso troskovnik.');
			}
		});
	}
	
	
	
	function removeExpenseItemFromDatabase(){
		
		var id = $("#expenseItemID").val();
		
		$.ajax({
			type : 'DELETE',
			url : "service/expenseList/removeExpenseItem/" + id + "/" + expenseList.name,
			dataType : 'text',
			success : function(responseData, textStatus, jqXHR) {
				window.location.reload();
			},
			error : function(responseData, textStatus, errorThrown) {
				console.log('DELETE failed nisam izbriso kategoriju.');
			}
		});
		
	}
	
	
	function removeCategoryFromExpenseList() {
		var currentCategoryName = $('#categoryName').val();

		var url = "service/expenseList/removeCategory/"
				+ currentCategoryName + "/" + expenseList.name;

		$.ajax({
			type : 'DELETE',
			url : url,
			dataType : 'text',
			success : function(responseData, textStatus, jqXHR) {
				window.location.reload();
			},
			error : function(responseData, textStatus, errorThrown) {
				console.log('DELETE failed nisam izbriso kategoriju.');
			}
		});

	}

	function changeExpenseItem() {
		var id = $('#expenseItemID').val();
		var name = $('#expenseName').val();
		var owner = $('#owner').val();
		var value = $('#expenseValue').val();
		var comment = $('#expenseComment').val();
		var startDate = $('#startDateExpenseItem').val();
		var endDate = $('#endDateExpenseItem').val();
		var amounts = [];

		 var period = document.getElementById("expensePeriod");
		 var periodCheck = period.options[period.selectedIndex].value;
		 if (periodCheck == "") {
		 period = "ANUALY";
		 }
		 if (periodCheck == "Mjesečno") {
		 period = "MONTHLY";
		 }
		 if (periodCheck == "Kvartalno") {
		 period = "QUARTARLY";
		 }
		 if (periodCheck == "Jednoročno") {
		 period = "ONE_TIME";
		 }

		amounts.push(parseFloat(value.toString()));
		var x = {
			id : id,
			name : name,
			comment : comment,
			amounts : amounts,
			startDate : startDate,
			endDate : endDate,
			period : period 

		}
		var json = JSON.stringify(x);

		$.ajax({
			type : 'POST',
			url : "service/expenseList/expenseItem",
			data : json,
			contentType : "application/json",
			dataType : 'text',
			contentType : "application/json",
			success : function(responseData, textStatus, jqXHR) {
				window.location.reload();
				console.log('ExpenseItem updated !')
			},
			error : function(responseData, textStatus, errorThrown) {
				console.log('POST failed nisam updateo item!');
			}
		});

	}

	function changeCategory() {
		var name = $('#categoryName').val();

		var fixed;
		if (document.getElementById("fixedCategoryYes").checked) {
			fixed = true;
		} else if (document.getElementById("fixedCategoryNo").checked) {
			fixed = false;
		}

		for (var i = 0; i < expenseList.expenseCategories.length; i++) {
			if (expenseList.expenseCategories[i].name == currentEditCategoryName) {
				var x = {
					id : expenseList.expenseCategories[i].id,
					name : name,
					fixed : fixed,
				}
				var json = JSON.stringify(x);

				$.ajax({
					type : 'POST',
					url : "service/expenseList/expenseCategory",
					data : json,
					contentType : "application/json",
					dataType : 'text',
					contentType : "application/json",
					success : function(responseData, textStatus, jqXHR) {
						window.location.reload();
						console.log('Category updated !')
					},
					error : function(responseData, textStatus, errorThrown) {
						console.log('POST failed nisam updateo kategoriju!');
					}
				});

			}

		}
	}

	function editExpenseItem(currentElementID) {
		hideAll();
		$.ajax({
			type : 'GET',
			url : "service/expenseList/getexpenseitem/" + currentElementID,
			dataType : 'json',
			success : function(responseData, textStatus, jqXHR) {
				var expenseItem = responseData;
				$('#expenseItemID').val(expenseItem.id);
				$('#expenseName').val(expenseItem.name);
				$('#expenseValue').val(expenseItem.amounts);
				$('#owner').val(expenseItem.expenseCategoryOwner);
				$('#expenseComment').val(expenseItem.comment);
				$('#startDateExpenseItem').val(expenseItem.startDate);
				$('#endDateExpenseItem').val(expenseItem.endDate);
				var fixed;
				if (expenseItem.fixed == true) {
					fixed = "DA";
				} else {
					fixed = "NE";
				}
				document.getElementById("checkFixed").innerHTML = fixed;
				
				var period = expenseItem.period;
				if (period == "ANUALY") {
					$("#expensePeriod").val("");
				}
				if (period == "MONTHLY") {
					$("#expensePeriod").val("Mjesečno");
				}
				if (period == "QUARTARLY") {
					$("#expensePeriod").val("Kvartalno");
				}
				if (period == "ONE_TIME") {
					$("#expensePeriod").val("Jednoročno");
				}				
				
				$('#addExpenseItemDivision').show(750);
			},

			error : function(responseData, textStatus, errorThrown) {
				alert('GET failed - nisam dohvatio danu kategoriju');
			}
		});
	}

	function editCategory(currentElementName) {
		hideAll();

		$.ajax({
			type : 'GET',
			url : "service/expenseList/expensecategory/" + currentElementName,
			dataType : 'json',
			success : function(responseData, textStatus, jqXHR) {
				var expenseCategory = responseData;
				$('#categoryName').val(expenseCategory.name);
				currentEditCategoryName = expenseCategory.name;
				if (expenseCategory.fixed == true) {
					document.getElementById('fixedCategoryYes').checked = true;
				} else {
					document.getElementById('fixedCategoryNo').checked = true;
				}
				$('#testing').show(750);
			},

			error : function(responseData, textStatus, errorThrown) {
				alert('GET failed - nisam dohvatio danu kategoriju');
			}
		});

	}

	function showChoiceHandler(name) {
		hideAll();

		$('#categoryIDCREATE').val(name);

		if (name.length == 0) {
			$("#buttonExpenseItem").hide();
		} else {
			$("#buttonExpenseItem").show();
		}

		$('#choiceHandler').show(750);

	}

	function choiceExpenseItem() {
		hideAll();

		var categoryname = $('#categoryIDCREATE').val();

		$.ajax({
			type : 'GET',
			url : "service/expenseList/expensecategoryByExpenseList/"
					+ categoryname + "/" + expenseList.name,
			dataType : 'json',
			success : function(responseData, textStatus, jqXHR) {
				var category = responseData;
				var fixed;
				if (category.fixed == true) {
					fixed = "DA";
				} else {
					fixed = "NE";
				}
				document.getElementById("checkFixedExpenseItemCREATE").innerHTML = fixed;
				$("#addExpenseItemDivisionCREATE").show(750);
			},
			error : function(responseData, textStatus, errorThrown) {
				alert('GET failed.');
			}
		});

	}
	function choiceCategory() {
		hideAll();
		/* -------------------------------- */
		$('#testingCREATE').show(750);
	}

	function createExpenseCategory(name, fixed, subCategories) {
		var x = {
			name : name,
			fixed : fixed,
			subCategories : subCategories
		}
		return x;
	}

	function createCategory() {
		var name = $('#categoryNameCREATE').val();
		var fixed = false;
		if (document.getElementById("fixedCategoryYesCREATE").checked) {
			fixed = true;
		} else if (document.getElementById("fixedCategoryNoCREATE").checked) {
			fixed = false;
		}

		var superCategory = $("#categoryIDCREATE").val();
		var category = createExpenseCategory(name + "&&" + superCategory,
				fixed, null);
		var json = JSON.stringify(category);

		$.ajax({
			type : 'POST',
			url : "service/expenseList/category/" + expenseList.name,
			data : json,
			contentType : "application/json",
			dataType : 'text',
			contentType : "application/json",
			success : function(responseData, textStatus, jqXHR) {
				if (responseData == "DA") {
					window.location.reload();
				} else {
					/* POZOVI ALERT */
					/* nema reload-a */
				}
			},
			error : function(responseData, textStatus, errorThrown) {
				console.log('POST failed nisam dodao kategoriju.');
			}
		});

	}

	function createExpenseItemDB() {
		var startDate = $('#startDateExpenseItemCREATE').val();
		var endDate = $('#endDateExpenseItemCREATE').val();

		var amounts = [];
		var amount = $('#expenseValue').val();
		for (var i = 0; i < amount.split(";").length; i++) {
			amounts.push(amount.split(";")[i]);
		}
		var comment = $('#expenseCommentCREATE').val();

		var category_name = $("#categoryIDCREATE").val();
		var name = $("#expenseNameCREATE").val();
		var period = document.getElementById("expensePeriodCREATE");
		var periodCheck = period.options[period.selectedIndex].value;
		if (periodCheck == "") {
			period = "ANUALY";
		}
		if (periodCheck == "Mjesečno") {
			period = "MONTHLY";
		}
		if (periodCheck == "Kvartalno") {
			period = "QUARTARLY";
		}
		if (periodCheck == "Jednoročno") {
			period = "ONE_TIME";
		}

		var x = {
			name : name,
			amounts : amounts,
			comment : comment,
			startDate : startDate,
			endDate : endDate,
			period : period
		}
		var json = JSON.stringify(x);

		$.ajax({
			type : 'POST',
			url : "service/expenseList/expenseitem/" + category_name + "/"
					+ expenseList.name,
			data : json,
			contentType : "application/json",
			dataType : 'text',
			contentType : "application/json",
			success : function(responseData, textStatus, jqXHR) {
				if (responseData == "DA") {
					window.location.reload();
				} else {
					/* POZOVI ALERT */
					/* nema reload-a */
				}

			},
			error : function(responseData, textStatus, errorThrown) {
				console.log('POST failed nisam dodao stavku!');
			}
		});

	}

	function processList(glavne, rootExpenseList) {
		var valueTest = "";
		if (expenseList.expenseCategories.length == 0) {
			var cvor = {
				parent : rootExpenseList,
				text : {
					name : {
						val : "Dodaj kategoriju",
						href : "javascript:showChoiceHandler('" + valueTest
								+ "')"
					},
				}
			}
			chart_config.push(cvor);
		}
		for ( var i in glavne) {
			var ime = glavne[i].name;
			var id = glavne[i].id;
			var cvor = {
				parent : rootExpenseList,
				text : {
					name : {
						val : glavne[i].name,
						href : "javascript:editCategory('" + id + "')"
					},
					title : "Kategorija",
					contact : {
						val : "Dodaj podkategoriju ili trošak",
						href : "javascript:showChoiceHandler('" + ime + "')"
					}
				}
			}

			chart_config.push(cvor);

			/* stavci */

			for (var j = 0; j < glavne[i].expenseItems.length; j++) {
				var id = glavne[i].expenseItems[j].id;
				var dijete = {
					parent : cvor,
					HTMLclass : 'blue',
					text : {
						name : {
							val : glavne[i].expenseItems[j].name,
							href : "javascript:editExpenseItem('" + id + "')"
						},
						title : "Stavka",
					}
				}
				chart_config.push(dijete);
			}

			//sada ulazimo u potkategorije

			if (glavne[i].subCategories.length == 0) {
			} else {

				processList(glavne[i].subCategories, cvor);

			}

		}

	}

	function getParentlessNodeID() {
		$.ajax({
			type : 'GET',
			url : "service/expenseList/parentlessCategories/" + name,
			dataType : 'json',
			success : function(responseData, textStatus, jqXHR) {
				indexi = responseData;
				var expenseListName = expenseList.name;
				var config = {
					container : "#wholeFuckingTree",

					connectors : {
						type : 'step'
					},
					node : {
						HTMLclass : 'nodeExample1'
					}
				};

				var rootExpenseList = {
					text : {
						name : expenseListName,
						contact : {
							val : "Uredi",
							href : "javascript:editExpenseList()"
						}
					},

				};
				chart_config = [ config, rootExpenseList ];

				var glavne = [];

				for (var i = 0; i < expenseList.expenseCategories.length; i++) {
					for ( var j in indexi) {
						if (expenseList.expenseCategories[i].id == indexi[j])
							glavne.push(expenseList.expenseCategories[i]);
					}
				}

				processList(glavne, rootExpenseList);
				drawIncomeItems(rootExpenseList);
				new Treant(chart_config);
				/* $('#wholeFuckingTree').append("<button class='w3-btn w3-left w3-light-grey' onClick = 'returnToHome()'>&laquo; Previous</button>");
				 */

			},
			error : function(responseData, textStatus, errorThrown) {
				alert('GET failed.');
			}
		});
	}

	$(document).ready(

	function() {

		$.ajax({
			type : 'GET',
			url : "service/expenseList/expenselistTree/" + name,
			dataType : 'json',
			success : function(responseData, textStatus, jqXHR) {
				expenseList = responseData;
				getParentlessNodeID();
			},
			error : function(responseData, textStatus, errorThrown) {
				alert('GET failed.');
			}
		});

	});

	function editExpenseList() {
		hideAll();
		$('#editExpenseListDivision').show(750);

	}

	function changeExpenseListName() {
		hideAll();
		$('#changeExpenserinoListName').show(750);

	}

	function renameExpenseList() {
		var newName = $('#newExpenseListNameInput').val();
		var oldName = expenseList.name;
		if (newName.length != 0) {
			$.ajax({
				type : 'POST',
				url : "service/expenseList/expenseListRename/" + oldName + "/"
						+ newName,
				dataType : 'text',
				success : function(responseData, textStatus, jqXHR) {
					if (responseData == "DA") {
						sessionStorage.setItem('expenseListName', newName);
						window.location.reload();
					} else {
						/* POZOVI ALERT */
						/* nema reload-a */
						console.log("Ime troskovnika se vec nalazi u bazi");

					}
				},
				error : function(responseData, textStatus, errorThrown) {
					console.log('POST failed nisam updateo item!');
				}
			});

		} else {
			console.log("IME JE PRAZNO!");
		}

	}


	function changeIncomeItem() {
		var id = $('#incomeItemID').val();
		var name = $('#incomeName').val();
		var value = $('#incomeValue').val();
		var comment = $('#incomeComment').val();
		var startDate = $('#startDateIncome').val();
		var endDate = $('#endDateIncome').val();
		var amounts = [];

		/* 		var period = document.getElementById("expensePeriod");
		 var periodCheck = period.options[period.selectedIndex].value;
		 if (periodCheck == "") {
		 period = "ANUALY";
		 }
		 if (periodCheck == "Mjesečno") {
		 period = "MONTHLY";
		 }
		 if (periodCheck == "Kvartalno") {
		 period = "QUARTARLY";
		 }
		 if (periodCheck == "Jednoročno") {
		 period = "ONE_TIME";
		 } */

		amounts.push(parseFloat(value.toString()));
		var x = {
			id : id,
			name : name,
			comment : comment,
			amounts : amounts,
			startDate : startDate,
			endDate : endDate
		/* 	period : period */

		}
		var json = JSON.stringify(x);

		$.ajax({
			type : 'POST',
			url : "service/expenseList/incomeItem",
			data : json,
			contentType : "application/json",
			dataType : 'text',
			contentType : "application/json",
			success : function(responseData, textStatus, jqXHR) {
				window.location.reload();
				console.log('IncomeItem updated !')
			},
			error : function(responseData, textStatus, errorThrown) {
				console.log('POST failed nisam updateo item!');
			}
		});

	}

	function addNewIncomeItem() {
		hideAll();

		$('#addIncomeItemDivisionCREATE').show(750);

	}

	function persistIncomeItem() {
		var val = $('#incomeNameCREATE').val();
		if (val.length != 0) {
			var amounts = [];
			var period = document.getElementById("incomePeriodCREATE");
			var periodCheck = period.options[period.selectedIndex].value;
			if (periodCheck == "") {
				period = "ANUALY";
			}
			if (periodCheck == "Mjesečno") {
				period = "MONTHLY";
			}
			if (periodCheck == "Kvartalno") {
				period = "QUARTARLY";
			}
			if (periodCheck == "Jednoročno") {
				period = "ONE_TIME";
			}
			var comment = $('#incomeCommentCREATE').val();
			var startDate = $('#startDateIncomeCREATE').val();
			var endDate = $('#endDateIncomeCREATE').val();

			var sallary = true;
			if (document.getElementById("incomeSallaryCREATE").checked) {
				sallary = true;
			} else if (document.getElementById("incomeOtherCREATE").checked) {
				sallary = false;
			}

			var fixed;
			if (document.getElementById("incomeIsFixedYesCREATE").checked) {
				fixed = true;
			} else if (document.getElementById("incomeIsFixedNoCREATE").checked) {
				fixed = false;
			}

			var value = $('#incomeValueCREATE').val();
			amounts.push(parseFloat(value.toString()));
			/* 	for (var i = 0; i < result + 1; i++) {
					var value = $('#incomeValue' + i).val();
					amounts.push(parseFloat(value.toString()));
				} */

			var x = {
				name : val,
				amounts : amounts,
				period : period,
				comment : comment,
				startDate : startDate,
				endDate : endDate,
				sallary : sallary,
				fixed : fixed
			}

			json = JSON.stringify(x);

			$.ajax({
				type : 'POST',
				url : "service/expenseList/income/" + expenseList.name,
				data : json,
				contentType : "application/json",
				dataType : 'text',
				contentType : "application/json",
				success : function(responseData, textStatus, jqXHR) {
					if (responseData == "DA") {
						window.location.reload();
					} else {
						/* POZOVI ALERT */
						/* nema reload-a */
					}
				},
				error : function(responseData, textStatus, errorThrown) {
					console.log('POST failed nisam dodao prihod.');
				}
			});
		}

	}

	function hideAll() {
		$('#testingCREATE').hide();
		$('#choiceHandler').hide();
		$('#addExpenseItemDivision').hide();
		$('#addExpenseItemDivisionCREATE').hide();
		$('#testing').hide();
		$('#addIncomeItemDivision').hide();
		$('#addIncomeItemDivisionCREATE').hide();
		$('#changeExpenserinoListName').hide();
		$('#editExpenseListDivision').hide();
	}

	function editIncomeItem(currentElementID) {
		hideAll();

		$.ajax({
			type : 'GET',
			url : "service/expenseList/getincomeitem/" + currentElementID,
			dataType : 'json',
			success : function(responseData, textStatus, jqXHR) {
				var incomeItem = responseData;
				$('#incomeItemID').val(incomeItem.id);
				$('#incomeName').val(incomeItem.name);
				$('#incomeValue').val(incomeItem.amounts);
				/* $('#owner').val(expenseItem.expenseCategoryOwner); */
				$('#incomeComment').val(incomeItem.comment);
				$('#startDateIncome').val(incomeItem.startDate);
				$('#endDateIncome').val(incomeItem.endDate);
				$('#addIncomeItemDivision').show(750);
			},

			error : function(responseData, textStatus, errorThrown) {
				alert('GET failed - nisam dohvatio danu kategoriju');
			}
		});
	}
	function drawIncomeItems(root) {
		var parent = root;
		var dijete;
		if (expenseList.incomeItems.length == 0) {
			dijete = parent;

		}
		for (var i = 0; i < expenseList.incomeItems.length; i++) {
			var id = expenseList.incomeItems[i].id;
			dijete = {
				parent : parent,
				stackChildren : true,
				text : {
					name : {
						val : expenseList.incomeItems[i].name,
						href : "javascript:editIncomeItem('" + id + "')"
					},
					title : "Prihod",
				}

			}
			parent = dijete;
			chart_config.push(dijete);
		}
		var lastChild = {
			parent : dijete,
			stackChildre : true,
			text : {
				name : {
					val : "Dodaj novi prihod",
					href : "javascript:addNewIncomeItem()"
				}
			}
		}
		chart_config.push(lastChild);

	}

	function returnToHome() {
		changeWindowUrl('home2.html');
	}

	/* 	function togglex() {
	 var text = $('#toggleItems').text();
	 $('#wholeFuckingTree').html("");
	 if ( text == "Prikaži prihode"){
	 $('#toggleItems').text("Prikaži troškove");
	 toggle = 1;
	 drawIncomeItemsChar();
	 }
	 else{
	 $('#toggleItems').text("Prikaži prihode");
	 toggle = 0;
	 getParentlessNodeID();
	 } 
	 }*/
</script>



<body>

	<div class="chart" id="wholeFuckingTree"></div>
	<div class="w3-container" id="fillIn">

		<button class='w3-btn w3-left w3-light-grey' onClick='returnToHome()'>&laquo;
			Povratak</button>


		<!-- <button class='w3-btn w3-left w3-light-grey' onClick='togglex()' id = "toggleItems" style = "margin-left: 10px;">Prikaži
			prihode</button> -->

		<!-- Dodaj novu kategoriju -->
		<div class="w3-container" style="margin-top: 45px; display: none"
			id="testing">
			<div class="w3-container w3-card" id="expenseItem">
				<h3>Kategorija</h3>

				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Ime kategorije</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="categoryName"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container"
						id="mojaForma">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 15px">Fiksnost</h4>
							</div>

							<div class="w3-col s9 w3-center">
								<p>
									<input class="w3-radio" type="radio" name="gender" value="1"
										id="fixedCategoryYes"> <label class="w3-validate">Da</label>
								</p>
								<p>
									<input class="w3-radio" type="radio" name="gender" value="2"
										id="fixedCategoryNo" checked> <label
										class="w3-validate">Ne</label>
								</p>
							</div>
						</div>
					</form>
					<div class="w3.container">
						<form action="javascript:void(0);" class="w3-container">
							<div class="w3-row">
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="changeCategory()">Spremi</button>
								</div>
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="removeCategoryFromExpenseList()">Izbriši
										kategoriju</button>
								</div>
							</div>
						</form>


					</div>
					<br> <br>
				</div>

			</div>
		</div>

		<!-- IZMENI EXPENSE ITEM -->
		<div class="w3-container" style="margin-top: 45px; display: none;"
			id="addExpenseItemDivision">
			<div class="w3-container w3-card" id="expense">
				<h3>Trošak</h3>

				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">

						<div>
							<input id="expenseItemID" type="hidden">
						</div>
						<div>
							<input id="owner" type="hidden">
						</div>
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Ime troška</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="expenseName"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Iznos</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="expenseValue"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Period</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<select class="w3-select" name="option" id="expensePeriod">
									<option value="">Godišnje</option>
									<option value="Mjesečno">Mjesečno</option>
									<option value="Kvartalno">Kvartalno</option>
									<option value="Jednoročno">Jednoročno</option>
								</select>
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Komentar</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="expenseComment"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 15px">Fiksnost</h4>
							</div>

							<div class="w3-col s3">
								<p id="checkFixed">DA/NE</p>

							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row-padding">
							<div class="w3-half" style="maring-left: -15px">
								<label>Datum početka</label> <input class="w3-input w3-border"
									type="text" id="startDateExpenseItem" placeholder="MM/YYYY">
							</div>
							<div class="w3-half">
								<label>Datum završetka</label> <input class="w3-input w3-border"
									type="text" id="endDateExpenseItem" placeholder="MM/YYYY">
							</div>
						</div>

					</form>


					<div class="w3.container" style="padding-top: 15px">
						<form action="javascript:void(0);" class="w3-container">
							<div class="w3-row">
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="changeExpenseItem()">Spremi</button>
								</div>
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="removeExpenseItemFromDatabase()">Izbriši
										stavak</button>
								</div>
							</div>
						</form>


					</div>




					<br> <br>
				</div>

			</div>
		</div>
	</div>

	<!-- CREATE EXPENSE ITEM -->
	<div class="w3-container" style="margin-top: 45px; display: none;"
		id="addExpenseItemDivisionCREATE">
		<div class="w3-container w3-card" id="expense">
			<h3>Trošak</h3>

			<div class="w3.container">
				<form action="javascript:void(0);" class="w3-container">

					<div>
						<input id="expenseItemIDCREATE" type="hidden">
					</div>
					<div>
						<input id="owner" type="hidden">
					</div>
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Ime troška</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<input id="expenseNameCREATE"
								class="w3-input w3-border w3-animate-input" type="text"
								style="width: 30%">
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Iznos</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<input id="expenseValueCREATE"
								class="w3-input w3-border w3-animate-input" type="text"
								style="width: 30%">
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Period</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<select class="w3-select" name="option" id="expensePeriodCREATE">
								<option value="">Godišnje</option>
								<option value="Mjesečno">Mjesečno</option>
								<option value="Kvartalno">Kvartalno</option>
								<option value="Jednoročno">Jednoročno</option>
							</select>
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Komentar</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<input id="expenseCommentCREATE"
								class="w3-input w3-border w3-animate-input" type="text"
								style="width: 30%">
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 15px">Fiksnost</h4>
						</div>

						<div class="w3-col s3">
							<p id="checkFixedExpenseItemCREATE">DA/NE</p>

						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row-padding">
						<div class="w3-half" style="maring-left: -15px">
							<label>Datum početka</label> <input class="w3-input w3-border"
								type="text" id="startDateExpenseItemCREATE"
								placeholder="MM/YYYY">
						</div>
						<div class="w3-half">
							<label>Datum završetka</label> <input class="w3-input w3-border"
								type="text" id="endDateExpenseItemCREATE" placeholder="MM/YYYY">
						</div>
					</div>

				</form>


				<div class="w3.container" style="padding-top: 15px">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<button
									class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
									onClick="createExpenseItemDB()">Spremi</button>
							</div>
						</div>
					</form>


				</div>




				<br> <br>
			</div>

		</div>
	</div>



	<!-- NAPRAVI NOVU CREATE kategoriju -->
	<div class="w3-container" style="margin-top: 45px; display: none"
		id="testingCREATE">
		<div class="w3-container w3-card" id="expenseItemCREATE">
			<div>
				<input id="categoryIDCREATE" type="hidden">
			</div>
			<h3>Kategorija</h3>

			<div class="w3.container">
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Ime kategorije</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<input id="categoryNameCREATE"
								class="w3-input w3-border w3-animate-input" type="text"
								style="width: 30%">
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container"
					id="mojaFormaCREATE">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 15px">Fiksnost</h4>
						</div>

						<div class="w3-col s9 w3-center">
							<p>
								<input class="w3-radio" type="radio" name="gender" value="1"
									id="fixedCategoryYesCREATE"> <label class="w3-validate">Da</label>
							</p>
							<p>
								<input class="w3-radio" type="radio" name="gender" value="2"
									id="fixedCategoryNoCREATE" checked> <label
									class="w3-validate">Ne</label>
							</p>
						</div>
					</div>
				</form>
				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<button
									class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
									onClick="createCategory()">Spremi</button>
							</div>
							<div class="w3-col s3">
								<!-- <button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="removeCategoryFromExpenseList()">Izbriši
										kategoriju</button> -->
							</div>
						</div>
					</form>


				</div>
				<br> <br>
			</div>

		</div>
	</div>



	<!-- Edit novi prihod -->

	<div class="w3-container" style="margin-top: 45px; display: none"
		id="addIncomeItemDivision">
		<div class="w3-container w3-card" id="incomeItem">
			<h3>Prihod</h3>

			<div class="w3.container">
				<form action="javascript:void(0);" class="w3-container">
					<div>
						<input id="incomeItemID" type="hidden">
					</div>
					<div class="w3-row">


						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Ime prihoda</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<input id="incomeName"
								class="w3-input w3-border w3-animate-input" type="text"
								style="width: 30%">
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Iznos</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<input id="incomeValue"
								class="w3-input w3-border w3-animate-input" type="text"
								style="width: 30%">
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Period</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<select class="w3-select" name="option" id="incomePeriod">
								<option value="">Godišnje</option>
								<option value="Mjesečno">Mjesečno</option>
								<option value="Kvartalno">Kvartalno</option>
								<option value="Jednoročno">Jednoročno</option>
							</select>
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Komentar</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<input id="incomeComment"
								class="w3-input w3-border w3-animate-input" type="text"
								style="width: 30%">
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 15px">Fiksnost</h4>
						</div>

						<div class="w3-col s9 w3-center">
							<p>
								<input class="w3-radio" type="radio" name="gender"
									id="incomeIsFixedYes" value="yes"> <label
									class="w3-validate">Da</label>
							</p>
							<p>
								<input class="w3-radio" type="radio" name="gender" value="no"
									id="incomeIsFixedNo" checked> <label
									class="w3-validate">Ne</label>
							</p>
						</div>
					</div>


				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 15px">Opis prihoda</h4>
						</div>

						<div class="w3-col s9 w3-center">
							<p>
								<input class="w3-radio" type="radio" name="gender"
									value="sallary" id="incomeSallary"> <label
									class="w3-validate">Plaća</label>
							</p>
							<p>
								<input class="w3-radio" type="radio" name="gender" value="other"
									id="incomeOther" checked> <label class="w3-validate">Ostalo</label>
							</p>
						</div>
					</div>


				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row-padding">
						<div class="w3-half" style="maring-left: -15px">
							<label>Datum početka</label> <input class="w3-input w3-border"
								type="text" id="startDateIncome" placeholder="MM/YYYY">
						</div>
						<div class="w3-half">
							<label>Datum završetka</label> <input class="w3-input w3-border"
								type="text" id="endDateIncome" placeholder="MM/YYYY">
						</div>
					</div>

				</form>


				<div class="w3.container" style="padding-top: 15px">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<button
									class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
									onClick="changeIncomeItem()">Spremi</button>
							</div>
						</div>
					</form>
				</div>
				<div class="w3.container" style="padding-top: 15px">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<button
									class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
									onClick="showIncomeInputs()">Prikaži</button>
							</div>
						</div>
					</form>
				</div>


				<form action="javascript:void(0);" id="listOfIncomeInputs"
					class="w3-container"></form>

				<br> <br>
			</div>

		</div>
	</div>

	<!-- Dodaj novi prihod -->

	<div class="w3-container" style="margin-top: 45px; display: none"
		id="addIncomeItemDivisionCREATE">
		<div class="w3-container w3-card" id="incomeItemCREATE">
			<h3>Prihod</h3>

			<div class="w3.container">
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Ime prihoda</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<input id="incomeNameCREATE"
								class="w3-input w3-border w3-animate-input" type="text"
								style="width: 30%">
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Iznos</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<input id="incomeValueCREATE"
								class="w3-input w3-border w3-animate-input" type="text"
								style="width: 30%">
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Period</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<select class="w3-select" name="option" id="incomePeriodCREATE">
								<option value="">Godišnje</option>
								<option value="Mjesečno">Mjesečno</option>
								<option value="Kvartalno">Kvartalno</option>
								<option value="Jednoročno">Jednoročno</option>
							</select>
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Komentar</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<input id="incomeCommentCREATE"
								class="w3-input w3-border w3-animate-input" type="text"
								style="width: 30%">
						</div>
					</div>
				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 15px">Fiksnost</h4>
						</div>

						<div class="w3-col s9 w3-center">
							<p>
								<input class="w3-radio" type="radio" name="gender"
									id="incomeIsFixedYesCREATE" value="yes"> <label
									class="w3-validate">Da</label>
							</p>
							<p>
								<input class="w3-radio" type="radio" name="gender" value="no"
									id="incomeIsFixedNoCREATE" checked> <label
									class="w3-validate">Ne</label>
							</p>
						</div>
					</div>


				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 15px">Opis prihoda</h4>
						</div>

						<div class="w3-col s9 w3-center">
							<p>
								<input class="w3-radio" type="radio" name="gender"
									value="sallary" id="incomeSallaryCREATE"> <label
									class="w3-validate">Plaća</label>
							</p>
							<p>
								<input class="w3-radio" type="radio" name="gender" value="other"
									id="incomeOtherCREATE" checked> <label
									class="w3-validate">Ostalo</label>
							</p>
						</div>
					</div>


				</form>
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row-padding">
						<div class="w3-half" style="maring-left: -15px">
							<label>Datum početka</label> <input class="w3-input w3-border"
								type="text" id="startDateIncomeCREATE" placeholder="MM/YYYY">
						</div>
						<div class="w3-half">
							<label>Datum završetka</label> <input class="w3-input w3-border"
								type="text" id="endDateIncomeCREATE" placeholder="MM/YYYY">
						</div>
					</div>

				</form>


				<div class="w3.container" style="padding-top: 15px">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<button
									class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
									onClick="persistIncomeItem()">Spremi</button>
							</div>
						</div>
					</form>
				</div>
				<!-- <div class="w3.container" style="padding-top: 15px">
						<form action="javascript:void(0);" class="w3-container">
							<div class="w3-row">
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="showIncomeInputs()">Prikaži</button>
								</div>
							</div>
						</form>
					</div> -->


				<form action="javascript:void(0);" id="listOfIncomeInputs"
					class="w3-container"></form>

				<br> <br>
			</div>

		</div>
	</div>


	<!-- Division za izmjenit ime troškovnika -->
	<div class="w3-container" style="margin-top: 45px; display: none"
		id="changeExpenserinoListName">
		<div class="w3-container w3-card">
			<div class="w3.container">
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3">
							<h4 style="margin-top: 3px">Novo ime troškovnika</h4>
						</div>
						<div class="w3-col s9 w3-center">
							<input id="newExpenseListNameInput"
								class="w3-input w3-border w3-animate-input" type="text"
								style="width: 30%">
						</div>
					</div>
					<div class="w3-row">
						<div class="w3-col s3" style="padding-top: 10px">
							<button
								class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
								onClick="renameExpenseList()">Preimenuj</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>



	<!-- forma za uredit sam troškovnik -->
	<div class="w3-container" style="margin-top: 45px; display: none"
		id="editExpenseListDivision">
		<div class="w3-container w3-card" id="removeExpenseListDivisionInner">
			<h4>Što želite urediti na trenutno izabranom troškovniku ?</h4>
			<div class="w3.container">
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3" style="padding-top: 10px">
							<button
								class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
								onClick="changeExpenseListName()">Preimenuj</button>
						</div>
					</div>
				</form>


			</div>

			<div class="w3.container">
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3"
							style="padding-top: 20px; padding-bottom: 20px">
							<button
								class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
								onClick="removeExpenseList()">Izbriši</button>
						</div>
					</div>
				</form>


			</div>

		</div>




	</div>





	<!-- forma za izabrat expenseCategory ili expenseItem -->
	<div class="w3-container" style="margin-top: 45px; display: none"
		id="choiceHandler">
		<div class="w3-container w3-card" id="removeExpenseListDivisionInner">
			<h4>Što želite dodati u trenutnu kategoriju ?</h4>
			<div class="w3.container">
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3" style="padding-top: 10px">
							<button
								class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
								id="buttonExpenseItem" onClick="choiceExpenseItem()">Stavka
								troška</button>
						</div>
					</div>
				</form>


			</div>
			<div class="w3.container">
				<form action="javascript:void(0);" class="w3-container">
					<div class="w3-row">
						<div class="w3-col s3"
							style="padding-top: 20px; padding-bottom: 20px">
							<button
								class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
								onClick="choiceCategory()">Podkategorija</button>
						</div>
					</div>
				</form>


			</div>

		</div>




	</div>


	<script src="vendor/raphael.js"></script>
	<script src="js/Treant.js"></script>
</body>
</html>
