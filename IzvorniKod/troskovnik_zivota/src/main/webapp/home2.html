<!DOCTYPE html>
<html>
<title>Home</title>
<meta charset="UTF-8" name="viewport"
	content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet">
<link href="css/loader.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="css/set2.css" />

<!-- Jquery -->
<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<!-- Slijed skup importova od kojih svaki upravlja jednom funkcionalnošću aplikacije -->
<script src="js/general.js"></script>
<script src="js/sendEmail.js"></script>
<script src="js/modalAlerts.js"></script>
<script src="js/loader.js"></script>
<script src="js/generatePDF.js"></script>
<script src="js/notifications.js"></script>
<script src="js/statistics.js"></script>

<style>
html, body, h1, h2, h3, h4, h5 {
	font-family: "Raleway", sans-serif
}

.input--nao {
	overflow: hidden;
	padding-top: 1em;
}

.input__field--nao {
	padding: 0.5em 0em 0.25em;
	width: 100%;
	background: transparent;
	color: #262626;
	font-size: 1.25em;
	text-align: center;
}

.input__label--nao {
	position: absolute;
	top: 0.95em;
	font-size: 0.85em;
	left: 0;
	display: block;
	width: 100%;
	text-align: left;
	padding: 0em;
	pointer-events: none;
	-webkit-transform-origin: 0 0;
	transform-origin: 0 0;
	-webkit-transition: -webkit-transform 0.3s 0.1s, color 1s;
	transition: transform 0.3s 0.1s, color 1s;
	-webkit-transition-timing-function: cubic-bezier(0, 0.25, 0.5, 1);
	transition-timing-function: cubic-bezier(0, 0.25, 0.5, 1);
}

.graphic--nao {
	stroke: #92989e;
	pointer-events: none;
	-webkit-transition: -webkit-transform 0.7s, stroke 0.7s;
	transition: transform 0.7s, stroke 0.7s;
	-webkit-transition-timing-function: cubic-bezier(0, 0.25, 0.5, 1);
	transition-timing-function: cubic-bezier(0, 0.25, 0.5, 1);
}

.input__field--nao:focus+.input__label--nao, .input--filled .input__label--nao
	{
	color: #333;
	-webkit-transform: translate3d(0, -1.25em, 0) scale3d(0.75, 0.75, 1);
	transform: translate3d(0, -1.25em, 0) scale3d(0.75, 0.75, 1);
}

.input__field--nao:focus ~ .graphic--nao, .input--filled .graphic--nao {
	stroke: #333;
	-webkit-transform: translate3d(-66.6%, 0, 0);
	transform: translate3d(-66.6%, 0, 0);
}

.w3-sidenav a {
	font-family: "Raleway", sans-serif
}
</style>
<script type="text/javascript">
	$(document).ready(function() {

		addNoBackButton();
		validateBackButton();

		var username = sessionStorage.getItem('username');
		var access = sessionStorage.getItem('access');
		if (isEmpty(access)) {
			openModal('modal2', 'Nemate ovlasti biti ovdje');
		} else {
			$('#usernameHolder').html(username);
			getExpenseLists(username, generateTableOfExpenseLists);
			getNotifications(username);
		}
	});

	function generateTableOfExpenseLists(expenseLists) {
		if (expenseLists.length == 0) {
			$("#expenseListsTable")
					.find('tbody')
					.append(
							$('<tr>')
									.append(
											$('<td>')
													.html(
															'Trenutno ne postoji niti jedan troškovnik u bazi podataka!')));
		} else {

			for (var i = 0; i < expenseLists.length; ++i) {
				$("#expenseListsTable").find('tbody').append(
						$(
								"<tr style='cursor: pointer' onClick='testFunct(this)' id='"
										+ expenseLists[i].name + "'>").append(
								$('<td>').html(expenseLists[i].name)));
			}
		}
	}
</script>

<!-- Funkcije za iznos input -->
<script type="text/javascript">
var exepctNumber = true;




function myFunction(event) {
	if (event.key == "Delete" || event.key == "Backspace" || event.key == "Del" || event.key == "Escape" ) {
		return;
	}
	if ($('#expenseValue').val() == null || $('#expenseValue').val() == "") {
		exepctNumber = true;
	}
	if (exepctNumber) {
		if (isNumber(event.key)) {
			exepctNumber = false;
			return;
		} else {
			$('#expenseValue').val(
					$('#expenseValue').val().substring(0,
							$('#expenseValue').val().length - 1));
			return;
		}
	} else {
		if (isDot(event.key)){
			return;
		}
		if (isSepartor(event.key)) {
			$('#expenseValue').val($('#expenseValue').val().trim() + ';');
			exepctNumber = true;
			return;
		} else if (isNumber(event.key)) {
			return;
		} else {
			$('#expenseValue').val(
					$('#expenseValue').val().substring(0,
							$('#expenseValue').val().length - 1));
			return;
		}
	}
}

function myFunction1(event) {
	if (event.key == "Delete" || event.key == "Backspace" || event.key == "Del" || event.key == "Escape" ) {
		return;
	}
	if ($('#incomeValue').val() == null || $('#incomeValue').val() == "") {
		exepctNumber = true;
	}
	if (exepctNumber) {
		if (isNumber(event.key)) {
			exepctNumber = false;
			return;
		} else {
			$('#incomeValue').val(
					$('#incomeValue').val().substring(0,
							$('#incomeValue').val().length - 1));
			return;
		}
	} else {
		if (isDot(event.key)){
			return;
		}
		if (isSepartor(event.key)) {
			$('#incomeValue').val($('#incomeValue').val().trim() + ';');
			exepctNumber = true;
			return;
		} else if (isNumber(event.key)) {
			return;
		} else {
			$('#incomeValue').val(
					$('#incomeValue').val().substring(0,
							$('#incomeValue').val().length - 1));
			return;
		}
	}
}
function isNumber(char) {
	if (char >= '0' && char <= '9') {
		return true;
	} else {
		return false;
	}
}
function isSepartor(char) {
	if (char == " ") {
		return true;
	} else {
		return false;
	}
}
function isDot(char) {
	if (char == ".") {
		return true;
	} else {
		return false;
	}
}

</script>

<!-- Skup fj za navigaciju po stranici. -->
<script type="text/javascript">
	/* TODO */
	function testFunct(currentElementRow) {
		sessionStorage.setItem('expenseListName', currentElementRow["id"]);
		console.log(currentElementRow["id"]);
		changeWindowUrl('test.html');
	}

	function displayExpenseListHide() {
		console.log('hide display f');
	}

	function newExpenseListHide() {
		console.log('hide new f');
	}

	function analizeExpenseListHide(){
		console.log('hide analize f');
	}

	function sendExpenseListHide() {
		console.log('hide send f');
	}

	function generatePDFHide() {
		console.log('hide generatePDF f');
	}

	function swap(activeBaseName, prepareDivFunctionName) {
		var activeDivID = activeBaseName + "Div";
		$('#dynamicContainer').children().each(
				function(index, element) {
					var currentDivID = $(this).attr('id');
					var currentLinkID = currentDivID.substr(0,
							currentDivID.length - 3)
							+ "Link";

					if ($(this).attr('id') == activeDivID) {
						$(this).show(750);
						$('#' + currentLinkID).attr('class',
								'w3-padding  w3-blue');
					} else {
						var currentFunctionName = currentDivID.substr(0,
								currentDivID.length - 3)
								+ "Hide";
						$(this).hide(750, window[currentFunctionName]());
						$('#' + currentLinkID).attr('class', 'w3-padding');
					}
				});

		if (!(typeof prepareDivFunctionName === "undefined")) {
			window[prepareDivFunctionName]();
		}
	}

	function logout() {
		sessionStorage.clear();
		addNoBackButton();
		changeWindowUrl('index.html');
	}
</script>

<!--  Skup fja za kreaciju troskovnika i interaktivnu aplikaciju -->
<script type="text/javascript">
	var isNewExpenseListActive = 0; /*provjera stanja */
	var originalCreationDivision = $('#appBody').html();
	var currentElementId = 0; /* LOŠE RIJEŠENJE !!! */
	var name_expenseList = ""; /*ime trenutnog troskovnika*/
	var result = ''; /*rezultat*/	
	
	function createExpenseList(name, expenseCategories, incomeItems, writable) {
		var x = {
			name : name,
			expenseCategories : expenseCategories,
			incomeItems : incomeItems,
			writable : writable
		}
		return x;
	}

	function createExpenseItem(name, amounts, period, comment, startDate,
			endDate) {
		var x = {
			name : name,
			amounts : amounts,
			period : period,
			comment : comment,
			startDate : startDate,
			endDate : endDate
		}
		return x;
	}
	
	function checkDates(startDate, endDate, string, fixed){
		var startDateChecker = startDate.substring(0, startDate.indexOf('/'));
		var endDateChecker = endDate.substring(0, endDate.indexOf('/'));
		
		if (startDateChecker > 12 || startDateChecker < 1 || endDateChecker > 12 || endDateChecker < 1 ){
			displayModalAlert("Krivo uneseni datumi.");
			return false;
		}	
		
		startDateChecker = startDate.substring(startDate.indexOf('/')+1);
		endDateChecker = endDate.substring(endDate.indexOf('/')+1);
		
		if ( ( startDateChecker > endDateChecker ) || ( (startDateChecker[0] != 2 ) && (startDateChecker[0] != 1)) || ((endDateChecker[0] != 2) && (endDateChecker[0] != 1 )) ){
			displayModalAlert("Krivo uneseni datumi.");
			return false;
		}
		if ( (startDateChecker ==  endDateChecker) && (startDate.substring(0, startDate.indexOf('/'))>endDate.substring(0, endDate.indexOf('/')))){
			displayModalAlert("Krivo uneseni datumi.");
			return false;
		}
		
		
		/* KAKVE SU OVO MAGIJE */
		var monthCounter = 1;
		var totalMonthsTest = 1;
		for (var i = 0 ; i < string.length ; i++){
			if (string[i] == ";"){
				monthCounter += 1; 
			}
		}
		if ( fixed == "NE"){
		if ( startDateChecker < endDateChecker ){
			var help1 = endDateChecker - startDateChecker;
			var help3 = startDate.substring(0, startDate.indexOf('/'));
			var help2 = endDate.substring(0, endDate.indexOf('/'));
			totalMonthsTest = 1 + parseInt(help1)*12 + parseInt(help2)-parseInt(help3);
			
		} else if ( startDateChecker == endDateChecker){
			var help1 = endDate.substring(0, endDate.indexOf('/')) - startDate.substring(0, startDate.indexOf('/')) ;
			totalMonthsTest = 1 + parseInt(help1);
		}else{
			displayModalAlert("Krivo uneseni datumi.");
			return false;
		}
		if ( totalMonthsTest != monthCounter){
			displayModalAlert("Krivo uneseni iznosi u odnosu na unesene datume.");
			return false;
		} else {
			return true;
		}
		}else{
			if (monthCounter != 1){
				displayModalAlert("Za fiksan trošak smije postojati samo jedan iznos.");
				return false;
			}
			return true;
		}
		
	}
	
	
	function persistExpenseItemToExpenseList() {
	
		if ( emptyExists('requiredInputExpenseItemHome')){
			displayModalAlert("Molimo Vas popunite sva obavezna polja.")
			return;
		}
		
		var startDate = $('#startDateExpenseItem').val();
		var endDate = $('#endDateExpenseItem').val();
		var string = $('#expenseValue').val();
			
		var fixerino = $("#checkFixed").text();
		if (!checkDates(startDate, endDate, string, fixerino)){
			return;
		}
		else{		
		var amounts = [];
		var amount = $('#expenseValue').val();
		for (var i = 0; i < amount.split(";").length; i++) {
			amounts.push(amount.split(";")[i]);
		}
		var comment = $('#expenseComment').val();
		var period = document.getElementById("expensePeriod");
		var periodCheck = period.options[period.selectedIndex].value;
		if (periodCheck == "") {
			period = "ANUALY";
		}
		if (periodCheck == "Mjesečno") {
			period = "MONTHLY";
		}
		if (periodCheck == "Kvartalno") {
			period = "QUARTARLY";
		}
		if (periodCheck == "Jednoročno") {
			period = "ONE_TIME";
		}

		var category_name = currentElementId.substring(10);
		var val = $("#expenseName").val();
		var expenseItem = createExpenseItem(val, amounts, period, comment,
				startDate, endDate);
		var json = JSON.stringify(expenseItem);

		$
				.ajax({
					type : 'POST',
					url : "service/expenseList/expenseitem/" + category_name
							+ "/" + name_expenseList,
					data : json,
					contentType : "application/json",
					dataType : 'text',
					contentType : "application/json",
					success : function(responseData, textStatus, jqXHR) {
						if (responseData == "DA") {
							$('#addExpenseItemDivision').hide(750);
							if (val.length != 0) {
								var html = $("#" + currentElementId).html();
								$('#' + currentElementId)
										.html(
												"<a href='#' id='expense"
														+ val
														+ "' onClick='showExpenseItem(this)'><i class='fa fa-circle' style='font-size:5px;position:relative;top:-3px;'></i> "
														+ val + "</a>" + html);
							}
							/* $("#expenseItem").val(''); */
							reset();

						} else if ( responseData == "NE") {
							/* POZOVI ALERT */
							displayModalAlert("Stavka sa istim nazivom već postoji.<br>Molimo vas izaberite drugi naziv. ");
						} else {
							displayModalAlert("Fiksnost trenutnog stavka (true) onemogućava dodavanje ovakvog stavka.");
						}
					},
					error : function(responseData, textStatus, errorThrown) {
						console.log('POST failed nisam dodao stavku!');
					}
				});}
	}

	function persistCategoryToExpenseList() {
		var fixed = false;
		if (document.getElementById("fixedCategoryYes").checked) {
			fixed = true;
		} else if (document.getElementById("fixedCategoryNo").checked) {
			fixed = false;
		}

		var superCategory = currentElementId.substring(10);
		var val = $('#categoryName').val();
		var category = createExpenseCategory(val + "&&" + superCategory, fixed,
				null);
		var json = JSON.stringify(category);

		$
				.ajax({
					type : 'POST',
					url : "service/expenseList/category/" + name_expenseList,
					data : json,
					contentType : "application/json",
					dataType : 'text',
					contentType : "application/json",
					success : function(responseData, textStatus, jqXHR) {
						if (responseData == "DA") {
							$('#testing').hide(750);

							var name = "Kategorija" + val;

							if (val.length != 0) {
								var html = $('#' + currentElementId).html();

								/* var itemHolder = "<div id='val' class='w3-accordion-content w3-padding-large w3-medium'><a href='#' onClick='addCategory()'>"+val+"<i class='fa fa-plus w3-margin-right'></i></a></div>";
								$('#KategorijaDefault').html(html + itemHolder); */
								$('#' + currentElementId)
										.html(
												"<div class='w3-accordion'><a href='#' id='"
														+ val
														+ "Href' onClick='myAccFuncDynamic(this)'>"
														+ val
														+ " <i class='fa fa-caret-down'></i></a>"
														+ "<div id='Kategorija"
												+ val
												+ "' class='w3-accordion-content w3-padding-large w3-medium'><a href='#' onClick='addCategory(this)' id='addCategory"
														+ val
														+ "'>Dodaj kategoriju <i class='fa fa-plus w3-margin-right'></i></a><a href='#' onClick='addExpenseItem(this)' id='addItemTo"
														+ val
														+ "'>Dodaj stavku <i class='fa fa-plus w3-margin-right'></i></a></div></div>"
														+ html);
							}
							reset();

						} else {
							/* POZOVI ALERT */
							reset();
							console.log("Kategorija vec postoji!");
							displayModalAlert("Kategorija sa istim nazivom već postoji.<br>Molimo vas izaberite drugi naziv. ");
						}
					},
					error : function(responseData, textStatus, errorThrown) {
						console.log('POST failed nisam dodao troskovnik.');
					}
				});

	}
	function createExpenseCategory(name, fixed, subCategories) {
		var x = {
			name : name,
			fixed : fixed,
			subCategories : subCategories
		}
		return x;
	}

	function removeExpenseListFromDatabase() {

		$.ajax({
			type : 'DELETE',
			url : "service/expenseList/remove/" + name_expenseList,
			dataType : 'text',
			success : function(responseData, textStatus, jqXHR) {
				name_expenseList = "";
				isNewExpenseListActive = 0;
				reset();
				window.location.replace("home2.html")
				$('#appBody').html(originalCreationDivision);
				console.log('Izbrisao troškovnik');
			},
			error : function(responseData, textStatus, errorThrown) {
				console.log('POST failed nisam izbriso troskovnik.');
			}
		});

	}
	function persistExpenseList() {
		var name = $('#input-1').val();
		var username = sessionStorage.getItem('username');
		var list = createExpenseList(name, null, null, true);
		var json = JSON.stringify(list);

		$
				.ajax({
					type : 'POST',
					url : "service/expenseList/" + username,
					data : json,
					contentType : "application/json",
					dataType : 'text',
					contentType : "application/json",
					success : function(responseData, textStatus, jqXHR) {
						name_expenseList = name;
						if (responseData == "DA") {
							$("#navMenu").removeAttr("style");
							$("#newExpenseListDivision").attr("style",
									"display:none;");
							var val = $("#input-1").val();
							$("#navMenu1").children("#imeHeader").html(
									"<b>" + val + "</b>");
						} else {
							/* POZOVI ALERT */
							$('#input-1').val("");
							console.log("ime troskovnika vec postoji !");
							displayModalAlert("Troškovnik sa istim nazivom već postoji.<br>Molimo vas izaberite drugi naziv. ");
						}
					},
					error : function(responseData, textStatus, errorThrown) {
						console.log('POST failed nisam dodao troskovnik.');
					}
				});
	}

	function generatePDF_test() {

		var name = $("#testButton").text();

		$.ajax({
			type : 'GET',
			url : "service/expenseList/generate/" + name,
			dataType : 'text',
			success : function(responseData, textStatus, jqXHR) {
				var answer = responseData;
				if (answer == "ok") {
					console.log("PDF Kreiran");
				}
			},
			error : function(responseData, textStatus, errorThrown) {
				alert('GET failed.');
			}
		});

	}

	function searchForExpenseLists() {

		if (isNewExpenseListActive == 1) {
			showPageContent();

		}

		var hookup = $("#expenseListCheckboxHookup").empty();

		var expenseLists = getExpenseLists();
		//u pravoj imp ce se zvat getExpenseLists(username, callback);
		//u callback ces umotat ono kae od tuda pa do dolje

		if (expenseLists.length != 0) {
			hookup.append("<h5>Troškovnici za slanje</h5>");
			for (var i = 0; i < expenseLists.length; ++i) {
				var checkboxTemplate = $("#checkboxTemplate");
				var cloned = checkboxTemplate.clone().removeAttr("style")
						.removeAttr("id");
				cloned.children("label").html(expenseLists[i].name);
				hookup.append(cloned);
			}
		} else {
			hookup
					.append("<label style='font-size: 20px'>Za slanje troškovnika potrebno je prvo izraditi jedan. </label>");
		}
	}

	function homeExpenseList() {
		if (isNewExpenseListActive == 1) {
			showPageContent();
		}

	}
	
	function editExpenseListFunc() {
		if (isNewExpenseListActive == 1) {
			showPageContent();
		}

	}
	function generatePDF() {
		if (isNewExpenseListActive == 1) {
			showPageContent();
		}

	}

	function deleteExpenseList() {
		$('#addIncomeItemDivision').hide();
		$('#addExpenseItemDivision').hide();
		$('#testing').hide();
		$('#removeExpenseListDivisionOuter').show(750);
	}

	function saveAndExit() {
		isNewExpenseListActive = 0;
		reset();
		window.location.replace("home2.html");
		$('#appBody').html(originalCreationDivision);

	}

	function showPageContent() {
		/* 		$("#mySidenav").removeAttr("style", "padding-top"); */
		$('#mySidenav').css("padding-top", "0px");
		$('#mySidenav').addClass("w3-collapse");
		$('#menuButton').addClass("w3-hide-large");
		$("#pageContentNewExpenseList").hide();
		$("#pageContent").show(750);
		w3_open();

	}

	function newExpenseListCreation() {
		if (isNewExpenseListActive == 0) {
			isNewExpenseListActive = 1;
		}

		$('#mySidenav').removeClass("w3-collapse");
		$('#menuButton').removeClass("w3-hide-large");
		$('#pageContent').hide();
		$('#pageContentNewExpenseList').show(750);
		w3_open1();
		w3_close();
	}

	function getLayout() {
		persistExpenseList();
	}

	function addCategory(currentElement) {
		reset();
		$('#removeExpenseListDivisionOuter').hide();
		$('#addIncomeItemDivision').hide();
		$('#addExpenseItemDivision').hide();
		$('#testing').show(750);
		currentElementId = "Kategorija" + currentElement["id"].substring(11);
	}

	function addExpenseItem(currentElement) {
		reset();
		$('#removeExpenseListDivisionOuter').hide();
		$('#testing').hide();
		$('#addIncomeItemDivision').hide();

		currentElementId = "Kategorija" + currentElement["id"].substring(9);

		/* TODO NASLJEĐIVANJE FIKSNOSTI*/
		$.ajax({
			type : 'GET',
			url : "service/expenseList/expensecategoryByExpenseList/"
					+ currentElement["id"].substring(9) + "/"
					+ name_expenseList,
			dataType : 'json',
			success : function(responseData, textStatus, jqXHR) {
				var category = responseData;
				var fixed;
				if (category.fixed == true) {
					fixed = "DA";
				} else {
					fixed = "NE";
				}
				document.getElementById("checkFixed").innerHTML = fixed;
				$('#addExpenseItemDivision').show(750);

			},
			error : function(responseData, textStatus, errorThrown) {
				alert('GET failed.');
			}
		});
	}

	function addExpenseItemToList() {
		var val = $("#expenseName").val();
		
		persistExpenseItemToExpenseList();
	
	}

	function showExpenseItem(currentExpenseItem) {
		var val = currentExpenseItem["id"];
		var x = document.getElementById(val);

		/* 	TODO : IZVUCI IZ BAZE I POPUNI SVA POLJA
			$("#expenseValue").val(value)
			$("#expenseComment").val(value)
			$("#expensePeriod").val(value) */

		$("#expenseName").val(x.text);
		$("#testing").hide();
		$('#addIncomeItemDivision').hide();
		$("#addExpenseItemDivision").show(750);

	}
	function addCategoryToList() {
		var val = $("#categoryName").val();
		if (val.length != 0) {
			persistCategoryToExpenseList();
		} else {
			displayModalAlert("Ime kategorije je prazno !");
		}

		/* $("#categoryName").val(''); */

		/* 	var val = $('#KategorijaDefault').children();
			for (var i = 0; i <= val.length-2; i++){
				console.log(val[i].text);
			} */
	}
	var swap_x = 0; /*ako je 0, onda je mySidenav hidden, ako je 1 onda je mySidenav vidljiv */

	function swapNavs() {
		if (swap_x == 0) {
			$("#mySidenavDropdown").removeClass("w3-collapse");
			w3_close1();
			$("#mySidenav").attr("style",
					"z-index: 3; width: 300px;padding-top: 43px;");
			w3_open();
			swap_x = 1;
		} else {
			$("#mySidenavDropdown").addClass("w3-collapse");
			w3_close();
			w3_open1();
			swap_x = 0;
		}
	}

	function removeAnswerYes() {
		removeExpenseListFromDatabase();
		/* TODO */
	}

	function removeAnswerNo() {
		$('#removeExpenseListDivisionOuter').hide(750);
	}

	function showIncomeInputs() {
		var startDate = $('#startDateIncome').val();
		var endDate = $('#endDateIncome').val();

		var startMonth = startDate.substring(0, startDate.indexOf('/'));
		var endMonth = endDate.substring(0, endDate.indexOf('/'));
		result = endMonth - startMonth;

		for (var i = 0; i < result + 1; i++) {
			var html = "<div class='w3-row'><div class='w3-col s3'><h4 style='margin-top: 3px'>Iznos za "
					+ (i + 1)
					+ ". mjesec </h4></div><div class='w3-col s9 w3-center'><input id='incomeValue"
					+ i
					+ "' class='w3-input w3-border w3-animate-input' type='text' style='width: 30%'></div></div>";
			$('#listOfIncomeInputs').append(html);
		}

	}

	function createIncomeItem(name, amounts, period, comment, startDate,
			endDate, sallary, fixed) {
		var x = {
			name : name,
			amounts : amounts,
			period : period,
			comment : comment,
			startDate : startDate,
			endDate : endDate,
			sallary : sallary,
			fixed : fixed
		}
		return x;
	}

	function addIncomeToIncomeList() {
		
		if ( emptyExists('requiredInputIncomeItemHome')){
			displayModalAlert("Molimo Vas popunite sva obavezna polja.")
			return;
		}
		
		var stringOfValues = '';
		var val = $('#incomeName').val();
			var amounts = [];
			var period = document.getElementById("incomePeriod");
			var periodCheck = period.options[period.selectedIndex].value;
			if (periodCheck == "") {
				period = "ANUALY";
			}
			if (periodCheck == "Mjesečno") {
				period = "MONTHLY";
			}
			if (periodCheck == "Kvartalno") {
				period = "QUARTARLY";
			}
			if (periodCheck == "Jednoročno") {
				period = "ONE_TIME";
			}
			var comment = $('#incomeComment').val();
			var fixed;
			var fixedd = "NE";
			if (document.getElementById("incomeIsFixedYes").checked) {
				fixed = true;
				fixedd = "DA";
			} else if (document.getElementById("incomeIsFixedNo").checked) {
				fixed = false;
				fixedd = "NE";
			}
			
			
			
			var startDate = $('#startDateIncome').val();
			var endDate = $('#endDateIncome').val();
			var string = $('#incomeValue').val();
			
			
			if (!checkDates(startDate, endDate, string, fixedd)){
				return;
			} else {
			
			
			
			var sallary = true;
			if (document.getElementById("incomeSallary").checked) {
				sallary = true;
			} else if (document.getElementById("incomeOther").checked) {
				sallary = false;
			}
			var amount = $('#incomeValue').val();
			for (var i = 0; i < amount.split(";").length; i++) {
				amounts.push(amount.split(";")[i]);
			}
			/* 	for (var i = 0; i < result + 1; i++) {
					var value = $('#incomeValue' + i).val();
					amounts.push(parseFloat(value.toString()));
				} */
			var income = createIncomeItem(val, amounts, period, comment,
					startDate, endDate, sallary, fixed);
			var json = JSON.stringify(income);

			$
					.ajax({
						type : 'POST',
						url : "service/expenseList/income/" + name_expenseList,
						data : json,
						contentType : "application/json",
						dataType : 'text',
						contentType : "application/json",
						success : function(responseData, textStatus, jqXHR) {
							if (responseData == "DA") {
								$('#addIncomeItemDivision').hide(750);
								var val = $("#incomeName").val();
								var html = $("#Prihodi").html();
								$('#Prihodi')
										.html(
												"<a href='#'><i class='fa fa-circle' style='font-size:5px;position:relative;top:-3px;'></i> "
														+ val + "</a>" + html);
								reset();
							} else if ( responseData == "NE"){
								/* POZOVI ALERT */
								reset();
								console
										.log("Prihod s ovim imenom vec postoji!");
								displayModalAlert("Prihod sa istim nazivom već postoji.<br>Molimo vas izaberite drugi naziv. ");
							}else {
								reset();
								displayModalAlert("Fiksnost trenutnog stavka ("+fixed+") onemogućava dodavanje ovakvog stavka.");
							}
						},
						error : function(responseData, textStatus, errorThrown) {
							console.log('POST failed nisam dodao troskovnik.');
						}
					});

	}
		}

	function addIncome() {
		reset()
		$('#removeExpenseListDivisionOuter').hide();
		$('#testing').hide();
		$('#addExpenseItemDivision').hide();
		$('#addIncomeItemDivision').show(750);
	}

	function reset() {
		$('#testing').find(':input').val('');
		$('#addExpenseItemDivision').find(':input').val('');
		$('#addIncomeItemDivision').find(':input').val('');

	}
</script>

<body class="w3-light-grey" id="appBody">

	<!-- Top container -->
	<div class="w3-container w3-top w3-black w3-large w3-padding"
		style="z-index: 4">
		<button class="w3-btn w3-hide-large w3-padding-0 w3-hover-text-grey"
			onclick="swapNavs()" id="menuButton">
			<i class="fa fa-bars"></i> Menu
		</button>
		<span class="w3-right" id="logout" onclick="logout()"
			style="cursor: pointer;">Odjava</span>
	</div>

	<!-- Sidenav/menu -->
	<nav class="w3-sidenav w3-collapse w3-white w3-animate-left"
		style="z-index: 3; width: 300px;" id="mySidenav">
		<br>
		<div class="w3-container w3-row">
			<div class="w3-col s4">
				<img src="w3images/avatar2.png" class="w3-circle w3-margin-right"
					style="width: 46px">
			</div>
			<div class="w3-col s8">
				<span>Dobrodošli, <strong id="usernameHolder"></strong></span><br>
				<a href="#"
					class="w3-hover-none w3-hover-text-red w3-show-inline-block"><i
					class="fa fa-envelope"></i></a> <a href="#"
					class="w3-hover-none w3-hover-text-green w3-show-inline-block"><i
					class="fa fa-user"></i></a> <a href="#"
					class="w3-hover-none w3-hover-text-blue w3-show-inline-block"><i
					class="fa fa-cog"></i></a>
			</div>
		</div>
		<hr>
		<div class="w3-container">
			<h5>Izbornik</h5>
		</div>
		<a href="#"
			class="w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black"
			onclick="w3_close()" title="close menu"><i
			class="fa fa-remove fa-fw"></i> Close Menu</a> <a href="#"
			class="w3-padding w3-blue" id="displayExpenseListLink"
			onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 4), 'homeExpenseList')"><i
			class="fa fa-eye"></i> Pregledaj troškovnik</a> <a href="#"
			class="w3-padding" id="newExpenseListLink"
			onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 4), 'newExpenseListCreation')"><i
			class="fa fa-plus-circle"></i> Novi troškovnik</a> <a href="#"
			class="w3-padding" id="analizeExpenseListLink"
			onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 4),'searchExpenseListsForStatistics')"><i
			class="fa fa-line-chart"></i> Analiza</a> <a href="#" class="w3-padding"
			id="sendExpenseListLink"
			onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 4), 'searchForExpenseListsToSend')"><i
			class="fa fa-send-o"></i> Pošalji troškovnik</a> <a href="#"
			class="w3-padding" id="generatePDFLink"
			onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 4), 'prepareGeneratePDF')"><i
			class="fa fa-file-pdf-o"></i> Generiraj PDF</a>
	</nav>


	<!-- Overlay effect when opening sidenav on small screens -->
	<div class="w3-overlay w3-hide-large w3-animate-opacity"
		onclick="w3_close()" style="cursor: pointer" title="close side menu"
		id="myOverlay"></div>


	<!-- PAGE CONTENT za NEWEXPENSELIST -->
	<div class="w3-main w3-light-grey"
		style="display: none; padding-top: 50px"
		id="pageContentNewExpenseList">
		<div class="w3-container" id="newExpenseListDivision">
			<div class="w3-display-middle">
				<h1 class="w3-jumbo w3-animate-top" style="text-align: center;">Ime
					troškovnika</h1>
				<hr class="w3-border-grey" style="margin: auto; width: 40%">
				<br> <span class="input input--nao" style="margin-left: 5%">
					<input class="input__field input__field--nao" type="text"
					id="input-1" /> <svg class="graphic graphic--nao" width="300%"
						height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
						<path
							d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0" />
					</svg>
				</span>

				<!-- 	 <input class="w3-input w3-animate-input" id="inputExpenseListNameID"
				type="text"
				style="width: 175px; text-align: center; background-color: AliceBlue; outline: none;">  -->
				<br> <br>
				<button
					class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
					style="margin-left: 42.5%;" onClick="getLayout()">Dalje</button>
			</div>
		</div>

		<!-- Sidenav/menu -->
		<nav class="w3-sidenav w3-collapse w3-light-grey w3-animate-left"
			style="z-index: 3; width: 350px;" id="mySidenavDropdown">
			<div id="navMenu" style="display: none;">
				<div class="w3-container w3-padding-16" id="navMenu1">
					<i onclick="w3_close1()"
						class="fa fa-remove w3-hide-large w3-closebtn w3-hover-text-red"></i>
					<h3 class="w3-wide" id="imeHeader">
						<b>LOGO</b>
					</h3>
				</div>
				<div class="w3-padding-64 w3-large w3-text-black"
					style="font-weight: bold">
					<div class="w3-accordion" id="kategorijeDropdown">
						<a onclick="myAccFunc()" href="javascript:void(0)"
							class="w3-text-black" id="myBtn"> Kategorije troškova<i
							class="fa fa-caret-down"></i>
						</a>
						<div id="KategorijaDefault"
							class="w3-accordion-content w3-padding-large w3-medium">
							<a href="#" onClick="addCategory(this)" id="addCategoryDefault">Dodaj
								kategoriju <i class="fa fa-plus w3-margin-right"></i>
							</a>
						</div>
					</div>
					<div class="w3-accordion">
						<a onclick="myAccFunc1()" href="javascript:void(0)"
							class="w3-text-black" id="myBtn1"> Prihodi <i
							class="fa fa-caret-down"></i>
						</a>
						<div id="Prihodi"
							class="w3-accordion-content w3-padding-large w3-medium">
							<a href="#" onClick="addIncome()">Dodaj prihod<i
								class="fa fa-plus w3-margin-right"></i></a>
						</div>
					</div>
					<div class="w3-accordion">
						<a onclick="saveAndExit()" href="javascript:void(0)"
							class="w3-text-black" id="myBtn3"> Završi i spremi </a>
					</div>
					<div class="w3-accordion" id="remove">
						<a onclick="deleteExpenseList()" href="javascript:void(0)"
							class="w3-text-black" id="myBtn2"> Izbriši <i
							class="fa fa-trash-o"></i>
						</a>
					</div>


				</div>
			</div>
		</nav>



		<!-- Izbriši expenseList -->
		<div class="w3-container"
			style="margin-left: 375px; margin-top: 45px; display: none"
			id="removeExpenseListDivisionOuter">
			<div class="w3-container w3-card" id="removeExpenseListDivisionInner">
				<h4>Želite li izbrisati troškovnik ?</h4>
				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3" style="padding-top: 10px">
								<button
									class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
									onClick="removeAnswerYes()">Da</button>
							</div>
						</div>
					</form>


				</div>
				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3"
								style="padding-top: 20px; padding-bottom: 20px">
								<button
									class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
									onClick="removeAnswerNo()">Ne</button>
							</div>
						</div>
					</form>


				</div>

			</div>




		</div>

		<div class="w3-accordion" id="itemAccordionHolder"></div>

		<!-- Dodaj novu kategoriju -->
		<div class="w3-container"
			style="margin-left: 375px; margin-top: 45px; display: none"
			id="testing">
			<div class="w3-container w3-card" id="expenseItem">
				<h3>Kategorija</h3>

				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Ime kategorije</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="categoryName"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 15px">Fiksnost</h4>
							</div>

							<div class="w3-col s9 w3-center">
								<p>
									<input class="w3-radio" type="radio" name="gender" value="yes"
										id="fixedCategoryYes"> <label class="w3-validate">Da</label>
								</p>
								<p>
									<input class="w3-radio" type="radio" name="gender" value="no"
										id="fixedCategoryNo" checked> <label
										class="w3-validate">Ne</label>
								</p>
							</div>
						</div>
					</form>
					<div class="w3.container">
						<form action="javascript:void(0);" class="w3-container">
							<div class="w3-row">
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="addCategoryToList()">Spremi</button>
								</div>
							</div>
						</form>


					</div>
					<br> <br>
				</div>

			</div>
		</div>

		<!-- Dodaj novi prihod -->
		<div class="w3-container"
			style="margin-left: 375px; margin-top: 45px; display: none"
			id="addIncomeItemDivision">
			<div class="w3-container w3-card" id="incomeItem">
				<h3>Prihod</h3>

				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Ime prihoda</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="incomeName"
									class="requiredInputIncomeItemHome w3-input w3-border w3-animate-input"
									type="text" style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Period</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<select class="w3-select" name="option" id="incomePeriod">
									<option value="">Godišnje</option>
									<option value="Mjesečno">Mjesečno</option>
									<option value="Kvartalno">Kvartalno</option>
									<option value="Jednoročno">Jednoročno</option>
								</select>
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Komentar</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="incomeComment"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 15px">Fiksnost</h4>
							</div>

							<div class="w3-col s9 w3-center">
								<p>
									<input class="w3-radio" type="radio" name="gender"
										id="incomeIsFixedYes" value="yes"> <label
										class="w3-validate">Da</label>
								</p>
								<p>
									<input class="w3-radio" type="radio" name="gender" value="no"
										id="incomeIsFixedNo" checked> <label
										class="w3-validate">Ne</label>
								</p>
							</div>
						</div>


					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 15px">Opis prihoda</h4>
							</div>

							<div class="w3-col s9 w3-center">
								<p>
									<input class="w3-radio" type="radio" name="gender"
										value="sallary" id="incomeSallary"> <label
										class="w3-validate">Plaća</label>
								</p>
								<p>
									<input class="w3-radio" type="radio" name="gender"
										value="other" id="incomeOther" checked> <label
										class="w3-validate">Ostalo</label>
								</p>
							</div>
						</div>


					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row-padding">
							<div class="w3-half" style="maring-left: -15px">
								<label>Datum početka</label> <input
									class="requiredInputIncomeItemHome w3-input w3-border"
									type="text" id="startDateIncome" placeholder="MM/YYYY">
							</div>
							<div class="w3-half">
								<label>Datum završetka</label> <input
									class="requiredInputIncomeItemHome w3-input w3-border"
									type="text" id="endDateIncome" placeholder="MM/YYYY">
							</div>
						</div>

					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row" style = "padding-top:15px">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Iznos</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="incomeValue" onkeyup="myFunction1(event)"
									class="requiredInputIncomeItemHome w3-input w3-border w3-animate-input"
									type="text" style="width: 30%">
							</div>
						</div>
					</form>
					


					<div class="w3.container" style="padding-top: 15px">
						<form action="javascript:void(0);" class="w3-container">
							<div class="w3-row">
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="addIncomeToIncomeList()">Spremi</button>
								</div>
							</div>
						</form>
					</div>
					<!-- 		<div class="w3.container" style="padding-top: 15px">
						<form action="javascript:void(0);" class="w3-container">
							<div class="w3-row">
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="showIncomeInputs()">Prikaži</button>
								</div>
							</div>
						</form>
					</div> -->


					<form action="javascript:void(0);" id="listOfIncomeInputs"
						class="w3-container"></form>

					<br> <br>
				</div>

			</div>
		</div>

		<!-- Dodaj novi stavak -->
		<div class="w3-container"
			style="margin-left: 375px; margin-top: 45px; display: none"
			id="addExpenseItemDivision">
			<div class="w3-container w3-card" id="expense">
				<h3>Trošak</h3>

				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Ime troška</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="expenseName"
									class="requiredInputExpenseItemHome w3-input w3-border w3-animate-input"
									type="text" style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Period</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<select class="w3-select" name="option" id="expensePeriod">
									<option value="">Godišnje</option>
									<option value="Mjesečno">Mjesečno</option>
									<option value="Kvartalno">Kvartalno</option>
									<option value="Jednoročno">Jednoročno</option>
								</select>
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Komentar</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="expenseComment"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 15px">Fiksnost</h4>
							</div>

							<div class="w3-col s3">
								<p id="checkFixed">DA/NE</p>

							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row-padding">
							<div class="w3-half" style="maring-left: -15px">
								<label>Datum početka</label> <input
									class="requiredInputExpenseItemHome w3-input w3-border"
									type="text" id="startDateExpenseItem" placeholder="MM/YYYY">
							</div>
							<div class="w3-half">
								<label>Datum završetka</label> <input
									class="requiredInputExpenseItemHome w3-input w3-border"
									type="text" id="endDateExpenseItem" placeholder="MM/YYYY">
							</div>
						</div>

					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row" style = "padding-top:15px">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Iznos</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="expenseValue" onkeyup="myFunction(event)"
									class="requiredInputExpenseItemHome w3-input w3-border w3-animate-input"
									type="text" style="width: 30%">
							</div>
						</div>
					</form>

					<div class="w3.container" style="padding-top: 15px">
						<form action="javascript:void(0);" class="w3-container">
							<div class="w3-row">
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="addExpenseItemToList()">Spremi</button>
								</div>
							</div>
						</form>


					</div>




					<br> <br>
				</div>

			</div>
		</div>

	</div>


	<!-- !PAGE CONTENT! -->
	<div class="w3-main" style="margin-left: 300px; margin-top: 43px;"
		id="pageContent">

		<!-- Header -->
		<header class="w3-container" style="padding-top: 22px">
			<h5>
				<b><i class="fa fa-dashboard"></i> Upravljačka ploča</b>
			</h5>
		</header>

		<div class="w3-row-padding w3-margin-bottom">
			<div class="w3-quarter" id="analizeExpenseListQuarter"
				onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 7),'searchExpenseListsForStatistics')"
				style="cursor: pointer">
				<div class="w3-container w3-red w3-padding-16">
					<div class="w3-left">
						<i class="fa fa-line-chart w3-xxxlarge"></i>

					</div>
					<div class="w3-right">
						<h3 id="messageNumberHolder"></h3>
					</div>
					<div class="w3-clear"></div>
					<h4>Analiza</h4>
				</div>
			</div>

			<div class="w3-quarter" id="sendExpenseListQuarter"
				onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 7), 'searchForExpenseListsToSend')"
				style="cursor: pointer">
				<div class="w3-container w3-blue w3-padding-16">
					<div class="w3-left">
						<i class="fa fa-send-o w3-xxxlarge"></i>
					</div>
					<div class="w3-right">
						<h3></h3>
					</div>
					<div class="w3-clear"></div>
					<h4>Posalji troskovnik</h4>
				</div>
			</div>
			<div class="w3-quarter" id="generatePDFQuarter"
				onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 7), 'prepareGeneratePDF')"
				style="cursor: pointer">
				<div class="w3-container w3-teal w3-padding-16">
					<div class="w3-left">
						<i class="fa fa-file-pdf-o w3-xxxlarge"></i>
					</div>
					<div class="w3-right">
						<h3></h3>
					</div>
					<div class="w3-clear"></div>
					<h4>Generiraj PDF</h4>
				</div>
			</div>
			<div class="w3-quarter" style="cursor: pointer"
				onclick="sessionStorage.setItem('register', 'false'); changeWindowUrl('register.html')">
				<div class="w3-container w3-orange w3-text-white w3-padding-16">
					<div class="w3-left">
						<i class="fa fa-users w3-xxxlarge"></i>
					</div>
					<div class="w3-right">
						<h3></h3>
					</div>
					<div class="w3-clear"></div>
					<h4>Izmjeni osobne podatake</h4>
				</div>
			</div>
		</div>

		<div id="dynamicContainer">
			<div class="w3-container" id="displayExpenseListDiv">
				<h4>Postojeći troškovnici</h4>
				<table
					class="w3-table w3-striped w3-bordered w3-border w3-hoverable w3-white"
					id="expenseListsTable">
					<tbody></tbody>
				</table>
				<br>
			</div>

			<div class="w3-container" id="newExpenseListDiv"
				style="display: none;">
				<h4>newExpenseListDiv TODO</h4>
			</div>

			<div class="w3-container" id="analizeExpenseListDiv"
				style="display: none;">
				<h1>Analiza troškovnika</h1>

				<div class="w3-container w3-card-4 w3-light-grey"
					id="expenseListAnalizeRadioBox"></div>
				<hr>


				<form action='javascript:void(0);' id=''
					class="w3-container w3-card-4 w3-light-grey">

					<h3 class="w3-left ">Odaberite razdoblje za prikaz</h3>
					<hr>
					<br>
					<div class="w3-row w3-section">
						<div class="w3-col" style="width: 50px;">
							<i class="fa fa-calendar-check-o fa-2x" aria-hidden="true"></i>
						</div>
						<div class="w3-rest">
							<input class="loginInput w3-input w3-border w3-round"
								name="startForm" type="text" required id="startInput"
								placeholder="mm/yyyy">
						</div>
					</div>

					<div class="w3-row w3-section">
						<div class="w3-col" style="width: 50px">
							<i class="fa fa-calendar-times-o fa-2x" aria-hidden="true"></i>
						</div>
						<div class="w3-rest">
							<input class="loginInput w3-input w3-border w3-round"
								name="endForm" type="text" required id="endInput"
								placeholder="mm/yyyy">
						</div>
					</div>

					<button
						class="w3-btn-block w3-section w3-blue w3-ripple w3-padding"
						onclick="analizeExpenseList()" id='analiteBtn'>Prikaži</button>
				</form>

				<div id="slika"></div>
			</div>

			<div class="w3-container" id="sendExpenseListDiv"
				style="display: none;">

				<div class="w3-container w3-card-4 w3-white"
					id="sendEmailExpenseListRBGHookup"></div>
				<hr>

				<form class="w3-container w3-card-4 w3-white"
					id="sendEmailSearchUsersForm" action="javascript:void(0);"
					style="display: none;">
					<h5>Parametar pretrage</h5>
					<select class="w3-select w3-border w3-hover-blue w3-round"
						name="searchParametersOptions"
						onchange="$('#parameterValueLable').html(this.options[this.selectedIndex].innerHTML)">
						<option value="username" selected>Korisničko ime</option>
						<option value="firstName">Ime</option>
						<option value="lastName">Prezime</option>
						<option value="email">Email adresa</option>
					</select>
					<p>
					<h5 id="parameterValueLable">Korisničko ime</h5>
					<input class="w3-input w3-border w3-animate-input  w3-round"
						type="text" style="width: 30%" id="parameterValue"
						required="required">
					<p>
						<button class="w3-btn w3-teal w3-round-large"
							onclick="searchForUsers()">Pretraži</button>
					<p>
				</form>

				<hr>

				<div class="w3-container w3-card-4 w3-white"
					id="sendEmailUsersRBGHookup"></div>

				<hr>

			</div>

			<div class="w3-container" id="generatePDFDiv" style="display: none;">

				<div class="w3-container w3-card-4 w3-white"
					id="generatePDFExpenseListsRGBHookup"></div>

				<div class="w3-container" id="generatePDFDiv">
					<div>
						<a class="w3-btn w3-right w3-white w3-border"
							id='generatePDFLinkButton' onclick="return setHref();">GENERIRAJ</a>
					</div>
				</div>

			</div>

		</div>

		<hr>
	</div>

	<hr>


	<!-- TEMPLATES -->
	<p style="display: none" id="checkboxTemplate">
		<input class="w3-check" type="checkbox"> <label
			class="w3-validate"></label>
	</p>

	<p style="display: none" id="radioTemplate">
		<input class="w3-radio" type="radio"> <label
			class="w3-validate"></label>
	</p>




	<!-- MODALS -->
	<div id="modal1" class="w3-modal">
		<div class="w3-modal-content w3-card-4 w3-animate-zoom">
			<header class="w3-container w3-green">
				<span onclick="$('#modal1').hide()"
					class="w3-closebtn w3-padding-top">&times;</span>
				<h2>
					Obavijest <i class="w3-xxlarge fa fa-exclamation-circle"></i>
				</h2>
			</header>
			<div class="w3-container">
				<h4 class="textHolder"></h4>
			</div>
			<div class="w3-container w3-light-grey w3-padding">
				<button class="w3-btn w3-right w3-white w3-border"
					onclick="$('#modal1').hide();">Zatvori</button>
			</div>
		</div>
	</div>

	<div id="modal2" class="w3-modal">
		<div class="w3-modal-content w3-card-4 w3-animate-zoom">
			<header class="w3-container w3-red">
				<span onclick="$('#modal2').hide(); changeWindowUrl('index.html');"
					class="w3-closebtn w3-padding-top">&times;</span>
				<h2>
					Greška <i class="w3-xxlarge fa fa-exclamation-circle"></i>
				</h2>
			</header>
			<div class="w3-container">
				<h4 class="textHolder"></h4>
			</div>
			<div class="w3-container w3-light-grey w3-padding">
				<button class="w3-btn w3-right w3-white w3-border"
					onclick="$('#modal2').hide(); changeWindowUrl('index.html');">Zatvori</button>
			</div>
		</div>
	</div>

	<!-- Skripte za upravljanje sideNav-ovima i stablom -->
	<script>
		var mySidenav = document.getElementById("mySidenav");
		var overlayBg = document.getElementById("myOverlay");

		// otvor / zatvori glavni sidenav
		function w3_open() {
			if (mySidenav.style.display === 'block') {
				mySidenav.style.display = 'none';
				overlayBg.style.display = "none";
			} else {
				mySidenav.style.display = 'block';
				overlayBg.style.display = "block";
			}
		}

		// zatvori glavni sidenav
		function w3_close() {
			mySidenav.style.display = "none";
			overlayBg.style.display = "none";
		}

		// skripta za prikaz Prihoda
		function myAccFunc1() {
			var x = document.getElementById("Prihodi");
			if (x.className.indexOf("w3-show") == -1) {
				x.className += " w3-show";
			} else {
				x.className = x.className.replace(" w3-show", "");
			}
		}
		// skripta za prikaz Kategorija
		function myAccFunc() {
			var x = document.getElementById("KategorijaDefault");
			if (x.className.indexOf("w3-show") == -1) {
				x.className += " w3-show";
			} else {
				x.className = x.className.replace(" w3-show", "");
			}
		}

		// skripta za dinamicki prikaz elementa stabla predanog parametrom
		function myAccFuncDynamic(currentElement) {

			var value = currentElement["id"];
			var i_value = $("#" + value).find("i");
			i_value.toggleClass("fa fa-caret-right fa fa-caret-down");

			var val = "Kategorija" + currentElement.text;
			var x = document.getElementById(val.substring(0, val.length - 1));
			if (x.className.indexOf("w3-show") == -1) {
				x.className += " w3-show";
			} else {
				x.className = x.className.replace(" w3-show", "");
			}
		}

		// otvori / zatvori unutarnji dropdown
		function w3_open1() {
			document.getElementById("mySidenavDropdown").style.display = "block";
			document.getElementById("myOverlay").style.display = "block";
		}

		function w3_close1() {
			document.getElementById("mySidenavDropdown").style.display = "none";
			document.getElementById("myOverlay").style.display = "none";
		}
		//skrpao se modal
		createModalAlert()
	</script>

</body>
</html>
