<!DOCTYPE html>
<html>
<title>Home</title>
<meta charset="UTF-8" name="viewport"
	content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet">

<link rel="stylesheet" type="text/css" href="css/set2.css" />

<!-- Jquery -->
<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="js/general.js"></script>

<style>
.input--nao {
	overflow: hidden;
	padding-top: 1em;
}

.input__field--nao {
	padding: 0.5em 0em 0.25em;
	width: 100%;
	background: transparent;
	color: #262626;
	font-size: 1.25em;
	text-align: center;
}

.input__label--nao {
	position: absolute;
	top: 0.95em;
	font-size: 0.85em;
	left: 0;
	display: block;
	width: 100%;
	text-align: left;
	padding: 0em;
	pointer-events: none;
	-webkit-transform-origin: 0 0;
	transform-origin: 0 0;
	-webkit-transition: -webkit-transform 0.3s 0.1s, color 1s;
	transition: transform 0.3s 0.1s, color 1s;
	-webkit-transition-timing-function: cubic-bezier(0, 0.25, 0.5, 1);
	transition-timing-function: cubic-bezier(0, 0.25, 0.5, 1);
}

.graphic--nao {
	stroke: #92989e;
	pointer-events: none;
	-webkit-transition: -webkit-transform 0.7s, stroke 0.7s;
	transition: transform 0.7s, stroke 0.7s;
	-webkit-transition-timing-function: cubic-bezier(0, 0.25, 0.5, 1);
	transition-timing-function: cubic-bezier(0, 0.25, 0.5, 1);
}

.input__field--nao:focus+.input__label--nao, .input--filled .input__label--nao
	{
	color: #333;
	-webkit-transform: translate3d(0, -1.25em, 0) scale3d(0.75, 0.75, 1);
	transform: translate3d(0, -1.25em, 0) scale3d(0.75, 0.75, 1);
}

.input__field--nao:focus ~ .graphic--nao, .input--filled .graphic--nao {
	stroke: #333;
	-webkit-transform: translate3d(-66.6%, 0, 0);
	transform: translate3d(-66.6%, 0, 0);
}

.w3-sidenav a {
	font-family: "Roboto", sans-serif
}

body, h1, h2, h3, h4, h5, h6, .w3-wide {
	font-family: "Montserrat", sans-serif;
}

html, body, h1, h2, h3, h4, h5 {
	font-family: "Raleway", sans-serif
}
</style>
<script type="text/javascript">
	$(document).ready(function() {
		var username = sessionStorage.getItem('username');
		if (isEmpty(username)) {
			addNoBackButton();
			openModal('modal1', 'Nemate ovlasti biti ovdje');
		} else {
			$('#usernameHolder').html(username);
			getExpenseLists(username, generateTableOfExpenseLists);
		}
	});

	function generateTableOfExpenseLists(expenseLists) {
		if (expenseLists.length == 0) {
			$("#expenseListsTable")
					.find('tbody')
					.append(
							$('<tr>')
									.append(
											$('<td>')
													.html(
															'Trenutno ne postoji niti jedan troškovnik u bazi podataka!')));
		} else {
			for (var i = 0; i < expenseLists.length; ++i) {
				$("#expenseListsTable").find('tbody').append(
						$(
								'<tr onClick="testFunct(this)" id="'
										+ expenseLists[i].name + '">').append(
								$('<td>').html(expenseLists[i].name)));
			}
		}
	}
</script>

<!-- Skup fj za navigaciju po stranici. -->
<script type="text/javascript">
	/* TODO */
	function testFunct(currentElementRow) {
		console.log(currentElementRow["id"]);
	}

	function displayExpenseListHide() {
		console.log('hide display f');
	}

	function newExpenseListHide() {
		console.log('hide new f');
	}

	function editExpenseListHide() {
		console.log('hide edit f');
	}

	function sendExpenseListHide() {
		console.log('hide send f');
	}

	function generatePDFHide() {
		console.log('hide generatePDF f');
	}

	function swap(activeBaseName, prepareDivFunctionName) {
		var activeDivID = activeBaseName + "Div";
		$('#dynamicContainer').children().each(
				function(index, element) {
					var currentDivID = $(this).attr('id');
					var currentLinkID = currentDivID.substr(0,
							currentDivID.length - 3)
							+ "Link";

					if ($(this).attr('id') == activeDivID) {
						$(this).show(750);
						$('#' + currentLinkID).attr('class',
								'w3-padding  w3-blue');
					} else {
						var currentFunctionName = currentDivID.substr(0,
								currentDivID.length - 3)
								+ "Hide";
						$(this).hide(750, window[currentFunctionName]());
						$('#' + currentLinkID).attr('class', 'w3-padding');
					}
				});

		if (!(typeof prepareDivFunctionName === "undefined")) {
			window[prepareDivFunctionName]();
		}
	}

	function logout() {
		sessionStorage.clear();
		changeWindowUrl('index.html');
	}
</script>

<!-- Skup fja za upravljanje trazilicom i slanjem troskovnika -->
<script type="text/javascript">
	function displayUsers(users, searchParameter, parameterValue) {
		var hookup = $("#searchResultCheckboxHookup").empty();
		if (users.length != 0) {
			hookup
					.append("Rezultati pretrage, označite kome želite poslat troškovnik<p>");

			for (var i = 0; i < users.length; ++i) {
				var checkboxTemplate = $("#checkboxTemplate");
				var cloned = checkboxTemplate.clone().removeAttr("style")
						.removeAttr("id");
				var html = "";
				html += "Ime: " + users[i].firstName + "  Prezime: "
						+ users[i].lastName + "  ";
				cloned.children("label").html(html);
				hookup.append(cloned);
			}

			hookup
					.append("<button class='w3-btn w3-red w3-round-large' onclick='sendExpenseList()'>Pošalji troškovnik</button><p>")
		} else {
			hookup.append("Za parametar pretrage'" + searchParameter
					+ "'i vrijednost paramtera '" + parameterValue
					+ "'ne postoji niti jedan rezultat rezultat.<p>");
		}
	}

	function searchForUsers() {
		var searchParameter = $("select[name='searchParametersOptions']").find(
				":selected").val();
		var parameterValue = $("#parameterValue").val();
		if (parameterValue == "") {
			return;
		}

		$.ajax({
			type : 'GET',
			url : "http://localhost:8080/baza-podataka/service/users/"
					+ searchParameter + "/" + parameterValue,
			crossDomain : true,
			dataType : 'json',
			success : function(responseData, textStatus, jqXHR) {
				displayUsers(responseData, searchParameter, parameterValue);
			},
			error : function(responseData, textStatus, errorThrown) {
				alert('GET failed.');
			}
		});

	}
</script>
<!--  Skup fja za kreaciju troskovnika i interaktivnu aplikaciju -->
<script type="text/javascript">
	var isNewExpenseListActive = 0; /*provjera stanja */
	var originalCreationDivision = $('#appBody').html();
	var currentElementId = 0; /* LOŠE RIJEŠENJE !!! */
	var name_expenseList = ""; /*ime trenutnog troskovnika*/
	var result = ''; /*rezultat*/

	function createExpenseList(name, expenseCategories, incomeItems) {
		var x = {
			name : name,
			expenseCategories : expenseCategories,
			incomeItems : incomeItems
		}
		return x;
	}

	function createExpenseItem(name, amounts, period, comment, startDate,
			endDate) {
		var x = {
			name : name,
			amounts : amounts,
			period : period,
			comment : comment,
			startDate : startDate,
			endDate : endDate
		}
		return x;
	}

	function persistExpenseItemToExpenseList() {
		var startDate = $('#startDateExpenseItem').val();
		var endDate = $('#endDateExpenseItem').val();

		var amounts = [];
		var amount = $('#expenseValue').val();
		amounts.push(parseFloat(amount.toString()));
		var comment = $('#expenseComment').val();
		var period = document.getElementById("expensePeriod");
		var periodCheck = period.options[period.selectedIndex].value;
		if (periodCheck == "") {
			period = "ANUALY";
		}
		if (periodCheck == "Mjesečno") {
			period = "MONTHLY";
		}
		if (periodCheck == "Kvartalno") {
			period = "QUARTARLY";
		}
		if (periodCheck == "Jednoročno") {
			period = "ONE_TIME";
		}

		var category_name = currentElementId.substring(10);
		var val = $("#expenseName").val();
		var expenseItem = createExpenseItem(val, amounts, period, comment,
				startDate, endDate);
		var json = JSON.stringify(expenseItem);

		$.ajax({
			type : 'POST',
			url : "service/expenseList/expenseitem/" + category_name,
			data : json,
			contentType : "application/json",
			dataType : 'text',
			contentType : "application/json",
			success : function(responseData, textStatus, jqXHR) {
				var value = responseData;
				if (value == "true") {
					$("#checkFixed").val("DA");
					console.log("Fiksnost DA");
				} else if (value == "false") {
					$("#checkFixed").val("NE");
					console.log("Fiksnost NE");
				}
				console.log('Dodao stavku!')
			},
			error : function(responseData, textStatus, errorThrown) {
				console.log('POST failed nisam dodao stavku!');
			}
		});
	}

	function persistCategoryToExpenseList() {
		var fixed = false;
		if (document.getElementById("fixedCategoryYes").checked) {
			fixed = true;
		} else if (document.getElementById("fixedCategoryNo").checked) {
			fixed = false;
		}

		var superCategory = currentElementId.substring(10);
		var val = $('#categoryName').val();
		var category = createExpenseCategory(val + "&&" + superCategory, fixed,
				null);
		var json = JSON.stringify(category);

		$.ajax({
			type : 'POST',
			url : "service/expenseList/category/" + name_expenseList,
			data : json,
			contentType : "application/json",
			dataType : 'text',
			contentType : "application/json",
			success : function(responseData, textStatus, jqXHR) {
				var val = responseData;
				console.log('Dodao kategoriju')
			},
			error : function(responseData, textStatus, errorThrown) {
				console.log('POST failed nisam dodao troskovnik.');
			}
		});

	}
	function createExpenseCategory(name, fixed, subCategories) {
		var x = {
			name : name,
			fixed : fixed,
			subCategories : subCategories
		}
		return x;
	}

	function removeExpenseListFromDatabase() {

		$.ajax({
			type : 'DELETE',
			url : "service/expenseList/remove/" + name_expenseList,
			dataType : 'text',
			success : function(responseData, textStatus, jqXHR) {
				name_expenseList = "";
				isNewExpenseListActive = 0;
				reset();
				window.location.replace("home2.html")
				$('#appBody').html(originalCreationDivision);
				console.log('Izbrisao troškovnik');
			},
			error : function(responseData, textStatus, errorThrown) {
				console.log('POST failed nisam izbriso troskovnik.');
			}
		});

	}
	function persistExpenseList() {
		var name = $('#input-1').val();
		var username = sessionStorage.getItem('username');
		var list = createExpenseList(name, null, null);
		var json = JSON.stringify(list);

		$.ajax({
			type : 'POST',
			url : "service/expenseList/" + username,
			data : json,
			contentType : "application/json",
			dataType : 'text',
			contentType : "application/json",
			success : function(responseData, textStatus, jqXHR) {
				name_expenseList = responseData;
				console.log('Dodao troskovnik')
			},
			error : function(responseData, textStatus, errorThrown) {
				console.log('POST failed nisam dodao troskovnik.');
			}
		});
	}

	function generatePDF_test() {

		var name = $("#testButton").text();

		$.ajax({
			type : 'GET',
			url : "service/expenseList/generate/" + name,
			dataType : 'text',
			success : function(responseData, textStatus, jqXHR) {
				var answer = responseData;
				if (answer == "ok") {
					console.log("PDF Kreiran");
				}
			},
			error : function(responseData, textStatus, errorThrown) {
				alert('GET failed.');
			}
		});

	}

	function searchForExpenseLists() {

		if (isNewExpenseListActive == 1) {
			showPageContent();

		}

		var hookup = $("#expenseListCheckboxHookup").empty();

		var expenseLists = getExpenseLists();
		//u pravoj imp ce se zvat getExpenseLists(username, callback);
		//u callback ces umotat ono kae od tuda pa do dolje

		if (expenseLists.length != 0) {
			hookup.append("<h5>Troškovnici za slanje</h5>");
			for (var i = 0; i < expenseLists.length; ++i) {
				var checkboxTemplate = $("#checkboxTemplate");
				var cloned = checkboxTemplate.clone().removeAttr("style")
						.removeAttr("id");
				cloned.children("label").html(expenseLists[i].name);
				hookup.append(cloned);
			}
		} else {
			hookup
					.append("<label style='font-size: 20px'>Za slanje troškovnika potrebno je prvo izraditi jedan. </label>");
		}
	}

	function homeExpenseList() {
		if (isNewExpenseListActive == 1) {
			showPageContent();
		}

	}
	function editExpenseListFunc() {
		if (isNewExpenseListActive == 1) {
			showPageContent();
		}

	}
	function generatePDF() {
		if (isNewExpenseListActive == 1) {
			showPageContent();
		}

	}

	function deleteExpenseList() {
		$('#addIncomeItemDivision').hide();
		$('#addExpenseItemDivision').hide();
		$('#testing').hide();
		$('#removeExpenseListDivisionOuter').show(750);
	}

	function saveAndExit() {
		isNewExpenseListActive = 0;
		reset();
		window.location.replace("home2.html");
		$('#appBody').html(originalCreationDivision);

	}

	function showPageContent() {
		$("#mySidenav").removeAttr("style", "padding-top");
		$('#mySidenav').addClass("w3-collapse");
		$('#menuButton').addClass("w3-hide-large");
		$("#pageContentNewExpenseList").hide();
		$("#pageContent").show(750);
		w3_open();

	}

	function newExpenseListCreation() {
		if (isNewExpenseListActive == 0) {
			isNewExpenseListActive = 1;
		}

		$('#mySidenav').removeClass("w3-collapse");
		$('#menuButton').removeClass("w3-hide-large");
		$('#pageContent').hide();
		$('#pageContentNewExpenseList').show(750);
		w3_open1();
		w3_close();
	}

	function getLayout() {
		persistExpenseList();
		$("#navMenu").removeAttr("style");
		$("#newExpenseListDivision").attr("style", "display:none;");
		var val = $("#input-1").val();
		$("#navMenu1").children("#imeHeader").html("<b>" + val + "</b>");
	}

	function addCategory(currentElement) {
		reset();
		$('#removeExpenseListDivisionOuter').hide();
		$('#addIncomeItemDivision').hide();
		$('#addExpenseItemDivision').hide();
		$('#testing').show(750);
		currentElementId = "Kategorija" + currentElement["id"].substring(11);
	}

	function addExpenseItem(currentElement) {
		reset();
		$('#removeExpenseListDivisionOuter').hide();
		$('#testing').hide();
		$('#addIncomeItemDivision').hide();

		currentElementId = "Kategorija" + currentElement["id"].substring(9);

		/* TODO NASLJEĐIVANJE FIKSNOSTI*/
		document.getElementById("checkFixed").innerHTML = "DA";

		$('#addExpenseItemDivision').show(750);
	}

	function addExpenseItemToList() {
		var val = $("#expenseName").val();
		if (val.length != 0) {
			persistExpenseItemToExpenseList();
		} else {
			console.log("IME JE PRAZNO");
		}
		$('#addExpenseItemDivision').hide(750);
		if (val.length != 0) {
			var html = $("#" + currentElementId).html();
			$('#' + currentElementId)
					.html(
							"<a href='#' id='expense"
									+ val
									+ "' onClick='showExpenseItem(this)'><i class='fa fa-circle' style='font-size:5px;position:relative;top:-3px;'></i> "
									+ val + "</a>" + html);
		}
		/* $("#expenseItem").val(''); */
		reset();
	}

	function showExpenseItem(currentExpenseItem) {
		var val = currentExpenseItem["id"];
		var x = document.getElementById(val);

		/* 	TODO : IZVUCI IZ BAZE I POPUNI SVA POLJA
			$("#expenseValue").val(value)
			$("#expenseComment").val(value)
			$("#expensePeriod").val(value) */

		$("#expenseName").val(x.text);
		$("#testing").hide();
		$('#addIncomeItemDivision').hide();
		$("#addExpenseItemDivision").show(750);

	}
	function addCategoryToList() {
		var val = $("#categoryName").val();
		if (val.length != 0) {
			persistCategoryToExpenseList();
		} else {
			console.log("IME JE PRAZNO");
		}
		$('#testing').hide(750);

		var name = "Kategorija" + val;

		if (val.length != 0) {
			var html = $('#' + currentElementId).html();

			/* var itemHolder = "<div id='val' class='w3-accordion-content w3-padding-large w3-medium'><a href='#' onClick='addCategory()'>"+val+"<i class='fa fa-plus w3-margin-right'></i></a></div>";
			$('#KategorijaDefault').html(html + itemHolder); */
			$('#' + currentElementId)
					.html(
							"<div class='w3-accordion'><a href='#' id='"
									+ val
									+ "Href' onClick='myAccFuncDynamic(this)'>"
									+ val
									+ " <i class='fa fa-caret-down'></i></a>"
									+ "<div id='Kategorija" 
									+ val 
									+ "' class='w3-accordion-content w3-padding-large w3-medium'><a href='#' onClick='addCategory(this)' id='addCategory"
									+ val
									+ "'>Dodaj kategoriju <i class='fa fa-plus w3-margin-right'></i></a><a href='#' onClick='addExpenseItem(this)' id='addItemTo"
									+ val
									+ "'>Dodaj stavku <i class='fa fa-plus w3-margin-right'></i></a></div></div>"
									+ html);
		}
		reset();
		/* $("#categoryName").val(''); */

		/* 	var val = $('#KategorijaDefault').children();
			for (var i = 0; i <= val.length-2; i++){
				console.log(val[i].text);
			} */
	}
	var swap_x = 0; /*ako je 0, onda je mySidenav hidden, ako je 1 onda je mySidenav vidljiv */

	function swapNavs() {
		if (swap_x == 0) {
			$("#mySidenavDropdown").removeClass("w3-collapse");
			w3_close1();
			$("#mySidenav").css("padding-top", "43px");
			w3_open();
			swap_x = 1;
		} else {
			$("#mySidenavDropdown").addClass("w3-collapse");
			w3_close();
			w3_open1();
			swap_x = 0;
		}
	}

	function removeAnswerYes() {
		removeExpenseListFromDatabase();
		/* TODO */
	}

	function removeAnswerNo() {
		$('#removeExpenseListDivisionOuter').hide(750);
	}

	function showIncomeInputs() {
		var startDate = $('#startDateIncome').val();
		var endDate = $('#endDateIncome').val();

		var startMonth = startDate.substring(0, startDate.indexOf('/'));
		var endMonth = endDate.substring(0, endDate.indexOf('/'));
		result = endMonth - startMonth;

		for (var i = 0; i < result + 1; i++) {
			var html = "<div class='w3-row'><div class='w3-col s3'><h4 style='margin-top: 3px'>Iznos za "
					+ (i + 1)
					+ ". mjesec </h4></div><div class='w3-col s9 w3-center'><input id='incomeValue"
					+ i
					+ "' class='w3-input w3-border w3-animate-input' type='text' style='width: 30%'></div></div>";
			$('#listOfIncomeInputs').append(html);
		}

	}

	function createIncomeItem(name, amounts, period, comment, startDate,
			endDate, sallary, fixed) {
		var x = {
			name : name,
			amounts : amounts,
			period : period,
			comment : comment,
			startDate : startDate,
			endDate : endDate,
			sallary : sallary,
			fixed : fixed
		}
		return x;
	}

	function addIncomeToIncomeList() {
		var stringOfValues = '';
		var val = $('#incomeName').val();
		if (val.length != 0) {
			var amounts = [];
			var period = document.getElementById("expensePeriod");
			var periodCheck = period.options[period.selectedIndex].value;
			if (periodCheck == "") {
				period = "ANUALY";
			}
			if (periodCheck == "Mjesečno") {
				period = "MONTHLY";
			}
			if (periodCheck == "Kvartalno") {
				period = "QUARTARLY";
			}
			if (periodCheck == "Jednoročno") {
				period = "ONE_TIME";
			}
			var comment = $('#incomeComment').val();
			var startDate = $('#startDateIncome').val();
			var endDate = $('#endDateIncome').val();
			
			
			var sallary = true;
			if (document.getElementById("incomeSallary").checked) {
				sallary = true;
			} else if (document.getElementById("incomeOther").checked) {
				sallary = false;
			}
			
			var fixed = true;
			if (document.getElementById("incomeIsFixedYes").checked) {
				fixed = true;
			} else if (document.getElementById("incomeIsFixedNo").checked) {
				fixed = false;
			}
			
			
			var value = $('#incomeValue').val();
			amounts.push(parseFloat(value.toString()));
			/* 	for (var i = 0; i < result + 1; i++) {
					var value = $('#incomeValue' + i).val();
					amounts.push(parseFloat(value.toString()));
				} */
			var income = createIncomeItem(val, amounts, period, comment,
					startDate, endDate, sallary, fixed);
			var json = JSON.stringify(income);

			$.ajax({
				type : 'POST',
				url : "service/expenseList/income/" + name_expenseList,
				data : json,
				contentType : "application/json",
				dataType : 'text',
				contentType : "application/json",
				success : function(responseData, textStatus, jqXHR) {
					console.log('Dodao prihod')
				},
				error : function(responseData, textStatus, errorThrown) {
					console.log('POST failed nisam dodao troskovnik.');
				}
			});

			$('#addIncomeItemDivision').hide(750);
			var val = $("#incomeName").val();
			if (val.length != 0) {
				var html = $("#Prihodi").html();
				$('#Prihodi').html("<a href='#'><i class='fa fa-circle' style='font-size:5px;position:relative;top:-3px;'></i> " + val + "</a>" + html);
			}
			/* 	$("#incomeName").val('');
			 */
		} else {
			console.log("IME JE PRAZNO");
		}
	}

	function addIncome() {
		reset()
		$('#removeExpenseListDivisionOuter').hide();
		$('#testing').hide();
		$('#addExpenseItemDivision').hide();
		$('#addIncomeItemDivision').show(750);
	}

	function reset() {
		$('#testing').find(':input').val('');
		$('#addExpenseItemDivision').find(':input').val('');
		$('#addIncomeItemDivision').find(':input').val('');

	}
</script>





<body class="w3-white" id="appBody">

	<!-- Top container -->
	<div class="w3-container w3-top w3-black w3-large w3-padding"
		style="z-index: 4">
		<button class="w3-btn w3-hide-large w3-padding-0 w3-hover-text-grey"
			onclick="swapNavs()" id="menuButton">
			<i class="fa fa-bars"></i> Menu
		</button>
		<span class="w3-right" id="logout" onclick="logout()"
			style="cursor: pointer;">Odjava</span>
	</div>

	<!-- Sidenav/menu -->
	<nav class="w3-sidenav w3-collapse w3-white w3-animate-left"
		style="z-index: 3; width: 300px;" id="mySidenav">
		<br>
		<div class="w3-container w3-row">
			<div class="w3-col s4">
				<img src="w3images/avatar2.png" class="w3-circle w3-margin-right"
					style="width: 46px">
			</div>
			<div class="w3-col s8">
				<span>Dobrodošli, <strong id="usernameHolder"></strong></span><br>
				<a href="#"
					class="w3-hover-none w3-hover-text-red w3-show-inline-block"><i
					class="fa fa-envelope"></i></a> <a href="#"
					class="w3-hover-none w3-hover-text-green w3-show-inline-block"><i
					class="fa fa-user"></i></a> <a href="#"
					class="w3-hover-none w3-hover-text-blue w3-show-inline-block"><i
					class="fa fa-cog"></i></a>
			</div>
		</div>
		<hr>
		<div class="w3-container">
			<h5>Izbornik</h5>
		</div>
		<a href="#"
			class="w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black"
			onclick="w3_close()" title="close menu"><i
			class="fa fa-remove fa-fw"></i> Close Menu</a> <a href="#"
			class="w3-padding w3-blue" id="displayExpenseListLink"
			onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 4), 'homeExpenseList')"><i
			class="fa fa-eye"></i> Pregledaj troškovnik</a> <a href="#"
			class="w3-padding" id="newExpenseListLink"
			onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 4), 'newExpenseListCreation')"><i
			class="fa fa-plus-circle"></i>Novi troškovnik</a> <a href="#"
			class="w3-padding" id="editExpenseListLink"
			onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 4), 'editExpenseListFunc')"><i
			class="fa fa-edit"></i> Uredi postojeći</a> <a href="#"
			class="w3-padding" id="sendExpenseListLink"
			onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 4), 'searchForExpenseLists')"><i
			class="fa fa-send-o"></i> Pošalji troškovnik</a> <a href="#"
			class="w3-padding" id="generatePDFLink"
			onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 4), 'generatePDF')"><i
			class="fa fa-file-pdf-o"></i> Generiraj PDF</a>
	</nav>


	<!-- Overlay effect when opening sidenav on small screens -->
	<div class="w3-overlay w3-hide-large w3-animate-opacity"
		onclick="w3_close()" style="cursor: pointer" title="close side menu"
		id="myOverlay"></div>


	<!-- PAGE CONTENT za NEWEXPENSELIST -->
	<div class="w3-main w3-white" style="display: none; padding-top: 50px"
		id="pageContentNewExpenseList">
		<div class="w3-container" id="newExpenseListDivision">
			<div class="w3-display-middle">
				<h1 class="w3-jumbo w3-animate-top" style="text-align: center;">Ime
					troškovnika</h1>
				<hr class="w3-border-grey" style="margin: auto; width: 40%">
				<br> <span class="input input--nao" style="margin-left: 5%">
					<input class="input__field input__field--nao" type="text"
					id="input-1" /> <svg class="graphic graphic--nao" width="300%"
						height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
						<path
							d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0" />
					</svg>
				</span>

				<!-- 	 <input class="w3-input w3-animate-input" id="inputExpenseListNameID"
				type="text"
				style="width: 175px; text-align: center; background-color: AliceBlue; outline: none;">  -->
				<br> <br>
				<button
					class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
					style="margin-left: 42.5%;" onClick="getLayout()">Dalje</button>
			</div>
		</div>

		<!-- Sidenav/menu -->
		<nav class="w3-sidenav w3-collapse w3-white w3-animate-left"
			style="z-index: 3; width: 350px;" id="mySidenavDropdown">
			<div id="navMenu" style="display: none;">
				<div class="w3-container w3-padding-16" id="navMenu1">
					<i onclick="w3_close1()"
						class="fa fa-remove w3-hide-large w3-closebtn w3-hover-text-red"></i>
					<h3 class="w3-wide" id="imeHeader">
						<b>LOGO</b>
					</h3>
				</div>
				<div class="w3-padding-64 w3-large w3-text-black"
					style="font-weight: bold">
					<div class="w3-accordion" id="kategorijeDropdown">
						<a onclick="myAccFunc()" href="javascript:void(0)"
							class="w3-text-black" id="myBtn"> Kategorije troškova<i
							class="fa fa-caret-down"></i>
						</a>
						<div id="KategorijaDefault"
							class="w3-accordion-content w3-padding-large w3-medium">
							<a href="#" onClick="addCategory(this)" id="addCategoryDefault">Dodaj
								kategoriju <i class="fa fa-plus w3-margin-right"></i>
							</a>
						</div>
					</div>
					<div class="w3-accordion">
						<a onclick="myAccFunc1()" href="javascript:void(0)"
							class="w3-text-black" id="myBtn1"> Prihodi <i
							class="fa fa-caret-down"></i>
						</a>
						<div id="Prihodi"
							class="w3-accordion-content w3-padding-large w3-medium">
							<a href="#" onClick="addIncome()">Dodaj prihod<i
								class="fa fa-plus w3-margin-right"></i></a>
						</div>
					</div>
					<div class="w3-accordion">
						<a onclick="saveAndExit()" href="javascript:void(0)"
							class="w3-text-black" id="myBtn3"> Završi i spremi </a>
					</div>
					<div class="w3-accordion" id="remove">
						<a onclick="deleteExpenseList()" href="javascript:void(0)"
							class="w3-text-black" id="myBtn2"> Izbriši <i
							class="fa fa-trash-o"></i>
						</a>
					</div>


				</div>
			</div>
		</nav>



		<!-- Izbriši expenseList -->
		<div class="w3-container"
			style="margin-left: 375px; margin-top: 45px; display: none"
			id="removeExpenseListDivisionOuter">
			<div class="w3-container w3-card" id="removeExpenseListDivisionInner">
				<h4>Želite li izbrisati troškovnik ?</h4>
				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3" style="padding-top: 10px">
								<button
									class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
									onClick="removeAnswerYes()">Da</button>
							</div>
						</div>
					</form>


				</div>
				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3"
								style="padding-top: 20px; padding-bottom: 20px">
								<button
									class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
									onClick="removeAnswerNo()">Ne</button>
							</div>
						</div>
					</form>


				</div>

			</div>




		</div>



		<div class="w3-accordion" id="itemAccordionHolder"></div>

		<!-- Dodaj novu kategoriju -->
		<div class="w3-container"
			style="margin-left: 375px; margin-top: 45px; display: none"
			id="testing">
			<div class="w3-container w3-card" id="expenseItem">
				<h3>Kategorija</h3>

				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Ime kategorije</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="categoryName"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 15px">Fiksnost</h4>
							</div>

							<div class="w3-col s9 w3-center">
								<p>
									<input class="w3-radio" type="radio" name="gender" value="yes"
										id="fixedCategoryYes"> <label class="w3-validate">Da</label>
								</p>
								<p>
									<input class="w3-radio" type="radio" name="gender" value="no"
										id="fixedCategoryNo" checked> <label
										class="w3-validate">Ne</label>
								</p>
							</div>
						</div>
					</form>
					<div class="w3.container">
						<form action="javascript:void(0);" class="w3-container">
							<div class="w3-row">
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="addCategoryToList()">Spremi</button>
								</div>
							</div>
						</form>


					</div>
					<br> <br>
				</div>

			</div>
		</div>



		<!-- Dodaj novi prihod -->

		<div class="w3-container"
			style="margin-left: 375px; margin-top: 45px; display: none"
			id="addIncomeItemDivision">
			<div class="w3-container w3-card" id="incomeItem">
				<h3>Prihod</h3>

				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Ime prihoda</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="incomeName"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Iznos</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="incomeValue"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Period</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<select class="w3-select" name="option" id="incomePeriod">
									<option value="">Godišnje</option>
									<option value="Mjesečno">Mjesečno</option>
									<option value="Kvartalno">Kvartalno</option>
									<option value="Jednoročno">Jednoročno</option>
								</select>
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Komentar</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="incomeComment"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 15px">Fiksnost</h4>
							</div>

							<div class="w3-col s9 w3-center">
								<p>
									<input class="w3-radio" type="radio" name="gender"
										id="incomeIsFixedYes" value="yes"> <label
										class="w3-validate">Da</label>
								</p>
								<p>
									<input class="w3-radio" type="radio" name="gender" value="no"
										id="incomeIsFixedNo" checked> <label
										class="w3-validate">Ne</label>
								</p>
							</div>
						</div>


					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 15px">Opis prihoda</h4>
							</div>

							<div class="w3-col s9 w3-center">
								<p>
									<input class="w3-radio" type="radio" name="gender"
										value="sallary" id="incomeSallary"> <label
										class="w3-validate">Plaća</label>
								</p>
								<p>
									<input class="w3-radio" type="radio" name="gender"
										value="other" id="incomeOther" checked> <label
										class="w3-validate">Ostalo</label>
								</p>
							</div>
						</div>


					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row-padding">
							<div class="w3-half" style="maring-left: -15px">
								<label>Datum početka</label> <input class="w3-input w3-border"
									type="text" id="startDateIncome" placeholder="MM/YYYY">
							</div>
							<div class="w3-half">
								<label>Datum završetka</label> <input class="w3-input w3-border"
									type="text" id="endDateIncome" placeholder="MM/YYYY">
							</div>
						</div>

					</form>


					<div class="w3.container" style="padding-top: 15px">
						<form action="javascript:void(0);" class="w3-container">
							<div class="w3-row">
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="addIncomeToIncomeList()">Spremi</button>
								</div>
							</div>
						</form>
					</div>
					<div class="w3.container" style="padding-top: 15px">
						<form action="javascript:void(0);" class="w3-container">
							<div class="w3-row">
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="showIncomeInputs()">Prikaži</button>
								</div>
							</div>
						</form>
					</div>


					<form action="javascript:void(0);" id="listOfIncomeInputs"
						class="w3-container"></form>

					<br> <br>
				</div>

			</div>
		</div>



		<!-- Dodaj novi stavak -->

		<div class="w3-container"
			style="margin-left: 375px; margin-top: 45px; display: none"
			id="addExpenseItemDivision">
			<div class="w3-container w3-card" id="expense">
				<h3>Trošak</h3>

				<div class="w3.container">
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Ime troška</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="expenseName"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Iznos</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="expenseValue"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Period</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<select class="w3-select" name="option" id="expensePeriod">
									<option value="">Godišnje</option>
									<option value="Mjesečno">Mjesečno</option>
									<option value="Kvartalno">Kvartalno</option>
									<option value="Jednoročno">Jednoročno</option>
								</select>
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 3px">Komentar</h4>
							</div>
							<div class="w3-col s9 w3-center">
								<input id="expenseComment"
									class="w3-input w3-border w3-animate-input" type="text"
									style="width: 30%">
							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row">
							<div class="w3-col s3">
								<h4 style="margin-top: 15px">Fiksnost</h4>
							</div>

							<div class="w3-col s3">
								<p id="checkFixed">DA/NE</p>

							</div>
						</div>
					</form>
					<form action="javascript:void(0);" class="w3-container">
						<div class="w3-row-padding">
							<div class="w3-half" style="maring-left: -15px">
								<label>Datum početka</label> <input class="w3-input w3-border"
									type="text" id="startDateExpenseItem" placeholder="MM/YYYY">
							</div>
							<div class="w3-half">
								<label>Datum završetka</label> <input class="w3-input w3-border"
									type="text" id="endDateExpenseItem" placeholder="MM/YYYY">
							</div>
						</div>

					</form>


					<div class="w3.container" style="padding-top: 15px">
						<form action="javascript:void(0);" class="w3-container">
							<div class="w3-row">
								<div class="w3-col s3">
									<button
										class="w3-btn w3-white w3-border w3-border-blue w3-round-xlarge"
										onClick="addExpenseItemToList()">Spremi</button>
								</div>
							</div>
						</form>


					</div>




					<br> <br>
				</div>

			</div>
		</div>




	</div>



	<!-- !PAGE CONTENT! -->
	<div class="w3-main" style="margin-left: 300px; margin-top: 43px;"
		id="pageContent">

		<!-- Header -->
		<header class="w3-container" style="padding-top: 22px">
			<h5>
				<b><i class="fa fa-dashboard"></i> Upravljačka ploča</b>
			</h5>
		</header>

		<div class="w3-row-padding w3-margin-bottom">
			<div class="w3-quarter" style="cursor: pointer">
				<div class="w3-container w3-red w3-padding-16">
					<div class="w3-left">
						<i class="fa fa-envelope w3-xxxlarge"></i>
					</div>
					<div class="w3-right">
						<h3 id="messageNumberHolder"></h3>
					</div>
					<div class="w3-clear"></div>
					<h4>Obavijesti</h4>
				</div>
			</div>
			<div class="w3-quarter" id="sendExpenseListQuarter"
				onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 7))"
				style="cursor: pointer">
				<div class="w3-container w3-blue w3-padding-16">
					<div class="w3-left">
						<i class="fa fa-send-o w3-xxxlarge"></i>
					</div>
					<div class="w3-right">
						<h3></h3>
					</div>
					<div class="w3-clear"></div>
					<h4>Posalji troskovnik</h4>
				</div>
			</div>
			<div class="w3-quarter" id="generatePDFQuarter"
				onclick="swap($(this).attr('id').substr(0, $(this).attr('id').length - 7))"
				style="cursor: pointer">
				<div class="w3-container w3-teal w3-padding-16">
					<div class="w3-left">
						<i class="fa fa-file-pdf-o w3-xxxlarge"></i>
					</div>
					<div class="w3-right">
						<h3></h3>
					</div>
					<div class="w3-clear"></div>
					<h4>Generiraj PDF</h4>
				</div>
			</div>
			<div class="w3-quarter" style="cursor: pointer">
				<div class="w3-container w3-orange w3-text-white w3-padding-16">
					<div class="w3-left">
						<i class="fa fa-users w3-xxxlarge"></i>
					</div>
					<div class="w3-right">
						<h3></h3>
					</div>
					<div class="w3-clear"></div>
					<h4>Izmjeni osobne podatake</h4>
				</div>
			</div>
		</div>

		<div id="dynamicContainer">
			<div class="w3-container" id="displayExpenseListDiv">
				<h4>Postojeći troškovnici</h4>
				<table
					class="w3-table w3-striped w3-bordered w3-border w3-hoverable w3-white"
					id="expenseListsTable">
					<tbody></tbody>
				</table>
				<br>
			</div>

			<div class="w3-container" id="newExpenseListDiv"
				style="display: none;">
				<h4>newExpenseListDiv TODO</h4>
			</div>

			<div class="w3-container" id="editExpenseListDiv"
				style="display: none;">
				<h4>editExpenseListDiv TODO</h4>
			</div>

			<div class="w3-container" id="sendExpenseListDiv"
				style="display: none;">

				<h4>Pošalji troškovnik</h4>

				<div class="w3-container w3-card-4 w3-white"
					id="expenseListCheckboxHookup"></div>
				<hr>

				<form class="w3-container w3-card-4 w3-white" id="searchContainter"
					action="javascript:void(0);">
					<h5>Parametar pretrage</h5>
					<select class="w3-select w3-border w3-hover-blue w3-round"
						name="searchParametersOptions"
						onchange="$('parameterValueLable').html(this.options[this.selectedIndex].innerHTML)">
						<option value="username" selected>Korisničko ime</option>
						<option value="firstName">Ime</option>
						<option value="lastName">Prezime</option>
						<option value="email">Email adresa</option>
					</select>
					<p>
					<h5 id="parameterValueLable">Korisničko ime</h5>
					<input class="w3-input w3-border w3-animate-input  w3-round"
						type="text" style="width: 30%" id="parameterValue"
						required="required">
					<p>
						<button class="w3-btn w3-teal w3-round-large"
							onclick="searchForUsers()">Pretrazi</button>
					<p>
					<div id="searchResultCheckboxHookup"></div>


				</form>
			</div>

			<div class="w3-container" id="generatePDFDiv" style="display: none;">
				<p>
					<button class="w3-btn w3-teal w3-round-large"
						onClick="generatePDF_test()" id="testButton">TEST123</button>
				</p>
			</div>

		</div>

		<hr>
		<!-- Footer -->
		<footer class="w3-container w3-padding-16 w3-light-grey">
			<h4>FOOTER</h4>
			<p>
				Powered by <a href="http://www.w3schools.com/w3css/default.asp"
					target="_blank">w3.css</a>
			</p>
		</footer>
		<!-- End page content -->
	</div>

	<!-- TEMPLATES -->
	<p style="display: none" id="checkboxTemplate">
		<input class="w3-check" type="checkbox"> <label
			class="w3-validate"></label>
	</p>


	<!-- Skripte za upravljanje sideNav-ovima i stablom -->
	<script>
		var mySidenav = document.getElementById("mySidenav");
		var overlayBg = document.getElementById("myOverlay");

		// otvor / zatvori glavni sidenav
		function w3_open() {
			if (mySidenav.style.display === 'block') {
				mySidenav.style.display = 'none';
				overlayBg.style.display = "none";
			} else {
				mySidenav.style.display = 'block';
				overlayBg.style.display = "block";
			}
		}

		// zatvori glavni sidenav
		function w3_close() {
			mySidenav.style.display = "none";
			overlayBg.style.display = "none";
		}

		// skripta za prikaz Prihoda
		function myAccFunc1() {
			var x = document.getElementById("Prihodi");
			if (x.className.indexOf("w3-show") == -1) {
				x.className += " w3-show";
			} else {
				x.className = x.className.replace(" w3-show", "");
			}
		}
		// skripta za prikaz Kategorija
		function myAccFunc() {
			var x = document.getElementById("KategorijaDefault");
			if (x.className.indexOf("w3-show") == -1) {
				x.className += " w3-show";
			} else {
				x.className = x.className.replace(" w3-show", "");
			}
		}

		// skripta za dinamicki prikaz elementa stabla predanog parametrom
		function myAccFuncDynamic(currentElement) {

			var value = currentElement["id"];
			var i_value = $("#" + value).find("i");
			i_value.toggleClass("fa fa-caret-right fa fa-caret-down");

			var val = "Kategorija" + currentElement.text;
			var x = document.getElementById(val.substring(0, val.length - 1));
			if (x.className.indexOf("w3-show") == -1) {
				x.className += " w3-show";
			} else {
				x.className = x.className.replace(" w3-show", "");
			}
		}

		// otvori / zatvori unutarnji dropdown
		function w3_open1() {
			document.getElementById("mySidenavDropdown").style.display = "block";
			document.getElementById("myOverlay").style.display = "block";
		}

		function w3_close1() {
			document.getElementById("mySidenavDropdown").style.display = "none";
			document.getElementById("myOverlay").style.display = "none";
		}
	</script>

</body>
</html>
